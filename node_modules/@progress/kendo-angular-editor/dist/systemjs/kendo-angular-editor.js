System.register("@progress/kendo-angular-editor",["tslib","rxjs/observable/fromEvent","@angular/forms","@angular/core","rxjs/operators/filter","@progress/kendo-angular-toolbar","@progress/kendo-angular-dialog","rxjs/operators/map","prosemirror-state","prosemirror-keymap","prosemirror-commands","prosemirror-view","prosemirror-history","@angular/common","@progress/kendo-angular-dropdowns","@progress/kendo-angular-buttons","prosemirror-model","prosemirror-schema-list","prosemirror-inputrules"],function(i){var n,r,o,a,s,l,c,d,u,p,f,h,m,g,v,y,k,b,_;function e(t){return t.__useDefault?t.default:t}return{setters:[function(t){n=e(t)},function(t){r=e(t)},function(t){o=e(t)},function(t){a=e(t)},function(t){s=e(t)},function(t){l=e(t)},function(t){c=e(t)},function(t){d=e(t)},function(t){u=e(t)},function(t){p=e(t)},function(t){f=e(t)},function(t){h=e(t)},function(t){m=e(t)},function(t){g=e(t)},function(t){v=e(t)},function(t){y=e(t)},function(t){k=e(t)},function(t){b=e(t)},function(t){_=e(t)}],execute:function(){!function(n){var r={};function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},o.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=38)}([function(t,e){t.exports=n},function(t,e){t.exports=a},function(t,e){t.exports=l},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.outerWidth=function(t){var e=t.offsetWidth,n=getComputedStyle(t);return e+(parseFloat(n.marginLeft)||0+parseFloat(n.marginRight)||0)},n.serializeDOMAttrs=function(t){return Array.from(t.attributes).reduce(function(t,e){return Object.assign({},t,((n={})[e.name]=e.value,n));var n},{})},n.removeEntries=function(r,e){return Object.keys(r).filter(function(t){return e(t)}).reduce(function(t,e){return Object.assign(t,((n={})[e]=r[e],n));var n},{})},n.removeEmptyEntries=function(e){return n.removeEntries(e,function(t){return null!==e[t]&&void 0!==e[t]&&""!==e[t]})},n.isEmpty=function(t){return 0===Object.keys(t).length},n.isNullOrUndefined=function(t){return null==t},n.safeString=function(t){return n.isNullOrUndefined(t)?"":t.toString()},n.first=function(t){return t[0]},n.last=function(t){return t[t.length-1]},n.unique=function(t){return Array.from(new Set(t))}},function(t,e){t.exports=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(13),a=n(37),s=n(36),l=n(35),c=n(2),d=n(4),u=n(34),p=n(9),f=n(12),h=n(33),m=n(11),g=n(8),v=n(32),y=n(30),k=n(20),b=n(18),_=n(17),w=n(16),M=n(6),C={createLink:{content:b.LinkDialogComponent},viewSource:{content:_.SourceDialogComponent,width:500,height:400},insertImage:{content:w.ImageDialogComponent}},x=function(){function t(t,e){this.element=t,this.dialogService=e,this.valueChange=new o.EventEmitter,this.stateChange=new o.EventEmitter,this.onChangeCallback=function(t){},this.onTouchedCallback=function(t){}}return e=t,Object.defineProperty(t.prototype,"value",{get:function(){var t=this.view?this.getSource():this._value;return"<p></p>"===t?this._value?"":this._value:t},set:function(t){this._value=t,this._previousValue=t,this.view&&this.exec("setHTML",this._value)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return"k-widget k-editor"},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){var e=this,n=this,t=this.container.element.nativeElement,r=M.createContentNode(this.value),o=f.EditorState.create({schema:g.schema,doc:r,plugins:[m.history(),h.keymap(v.buildKeymap(g.schema)),h.keymap({"Mod-z":m.undo,"Mod-y":m.redo}),h.keymap(p.baseKeymap)]});this.view=new u.EditorView(t,{state:o,dispatchTransaction:function(t){var e;this.updateState(this.state.apply(t)),n.stateChange.emit((e=this.state,{bold:M.isMarkActive(e,g.schema.marks.strong),italic:M.isMarkActive(e,g.schema.marks.em),underline:M.isMarkActive(e,g.schema.marks.underline),strikethrough:M.isMarkActive(e,g.schema.marks.strikethrough),link:M.isMarkActive(e,g.schema.marks.link),subscript:M.isMarkActive(e,g.schema.marks.subscript),superscript:M.isMarkActive(e,g.schema.marks.superscript),format:M.activeNodeName(e),insertOrderedList:M.isInListOfType(e,g.schema.nodes.orderedList),insertUnorderedList:M.isInListOfType(e,g.schema.nodes.bulletList),indent:M.canIndent(e,g.schema.nodes.listItem),outdent:M.canOutdent(e,g.schema.nodes.listItem),alignLeft:M.isAligned(e,k.alignLeftRules),alignCenter:M.isAligned(e,k.alignCenterRules),alignRight:M.isAligned(e,k.alignRightRules),alignJustify:M.isAligned(e,k.alignRemoveRules),undo:!m.undo(e),redo:!m.redo(e),noSelection:e.selection.empty}))}}),this.subs=a.fromEvent(this.container.element.nativeElement,"keyup").pipe(s.map(function(t){return t.keyCode}),l.filter(function(t){return 121===t}),s.map(function(){return e.userToolBar||e.defaultToolbar})).subscribe(function(t){return t.nativeElement.focus()});var i=a.fromEvent(this.element.nativeElement,"focusout").pipe(l.filter(function(t){return!e.element.nativeElement.contains(t.relatedTarget)}));this.subs.add(i.pipe(s.map(function(){return e.value}),l.filter(function(t){return!M.hasSameMarkup(t,n._previousValue)})).subscribe(function(t){e._previousValue=t,e.onChangeCallback(t),e.valueChange.emit(t)})),this.subs.add(i.subscribe(function(){return e.onTouchedCallback()}))},t.prototype.exec=function(t,e){y.editorCommands[t](e)(this.view.state,this.view.dispatch,this.view)},t.prototype.openDialog=function(t){var e=C[t],n=this.dialogService.open(e);n.content.instance.editor=this,n.content.instance.setData(this.view.state)},t.prototype.focus=function(){this.view.focus()},t.prototype.blur=function(){this.view.dom.blur()},t.prototype.getSource=function(){return M.getHTML(this.view.state)},t.prototype.ngOnDestroy=function(){this.subs.unsubscribe()},t.prototype.writeValue=function(t){this.value=null===t?void 0:t},t.prototype.registerOnChange=function(t){this.onChangeCallback=t},t.prototype.registerOnTouched=function(t){this.onTouchedCallback=t},r.__decorate([o.Input(),r.__metadata("design:type",String),r.__metadata("design:paramtypes",[String])],t.prototype,"value",null),r.__decorate([o.Output(),r.__metadata("design:type",o.EventEmitter)],t.prototype,"valueChange",void 0),r.__decorate([o.HostBinding("class"),r.__metadata("design:type",String),r.__metadata("design:paramtypes",[])],t.prototype,"className",null),r.__decorate([o.ContentChild(c.ToolBarComponent,{read:o.ElementRef}),r.__metadata("design:type",o.ElementRef)],t.prototype,"userToolBar",void 0),r.__decorate([o.ViewChild("content",{read:o.ViewContainerRef}),r.__metadata("design:type",o.ViewContainerRef)],t.prototype,"container",void 0),r.__decorate([o.ViewChild("defaultToolbar",{read:o.ElementRef}),r.__metadata("design:type",o.ElementRef)],t.prototype,"defaultToolbar",void 0),e=r.__decorate([o.Component({selector:"kendo-editor",providers:[d.DialogService,{provide:i.NG_VALUE_ACCESSOR,useExisting:o.forwardRef(function(){return e}),multi:!0}],template:'\n        <ng-content select="kendo-toolbar"></ng-content>\n        <kendo-toolbar *ngIf="!userToolBar" #defaultToolbar>\n            <kendo-toolbar-buttongroup>\n                <kendo-toolbar-button kendoEditorButton="bold"></kendo-toolbar-button>\n                <kendo-toolbar-button kendoEditorButton="italic"></kendo-toolbar-button>\n                <kendo-toolbar-button kendoEditorButton="underline"></kendo-toolbar-button>\n            </kendo-toolbar-buttongroup>\n            <kendo-toolbar-dropdownlist kendoEditorDropDown="format"></kendo-toolbar-dropdownlist>\n            <kendo-toolbar-buttongroup>\n                <kendo-toolbar-button kendoEditorButton="insertUnorderedList"></kendo-toolbar-button>\n                <kendo-toolbar-button kendoEditorButton="insertOrderedList"></kendo-toolbar-button>\n            </kendo-toolbar-buttongroup>\n            \x3c!-- <kendo-toolbar-dialog kendoEditorCommand="createLink"></kendo-toolbar-dialog> --\x3e\n        </kendo-toolbar>\n        <div #content class="k-content" style="height: 300px;"></div>\n        <div kendoDialogContainer></div>\n    ',styles:["\n        >>> .k-content > .ProseMirror {\n            height: 100%;\n            width: 100%;\n            box-sizing: border-box;\n            outline: none;\n            overflow: scroll;\n        }\n    "]}),r.__metadata("design:paramtypes",[o.ElementRef,d.DialogService])],t);var e}();e.EditorComponent=x},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var g=e(7),p=e(12),r=e(9),v=e(19),i=e(10),a=e(8),f=e(3),n=a.schema.nodes,s=n.blockquote,h=n.bulletList,l=n.doc,c=n.heading,d=n.listItem,m=n.orderedList,u=n.paragraph,y=n.image,k=function(t){return t instanceof g.Node?t.type.name:t.name},b=function(t){var e="string"==typeof t?t:k(t);return e===k(m)||e===k(h)},_=function(n){return Array.from(new Array(n.depth),function(t,e){return n.depth-e}).map(function(t){return n.node(t)}).map(k).find(b)};function w(t,e){var n=t.selection,r=n.from,o=n.$from,i=n.to;return n.empty?!!e.isInSet(t.storedMarks||o.marks()):!!t.doc.rangeHasMark(r,i,e)}function M(t,e,n){var r=C(function(t){return k(t)===k(e)})(t.selection);return!r||n&&!Object.keys(n).length?!!r:r.node.hasMarkup(e,n)}function C(o){return function(t){for(var e=t.$from,n=e.depth;0<n;n--){var r=e.node(n);if(o(r))return{depth:n,node:r}}}}function x(o,i){return void 0===i&&(i=1),function(t){for(var e=t.$from,n=e.depth;0<n;n--){var r=e.node(n);if(o(r)&&0==(i-=1))return{depth:n,node:r}}}}function S(e,n){return void 0===n&&(n=1),function(t){return x(function(t){return k(t)===k(e)},n)(t)}}function E(t,e){var n,r,o=t.parent,i=t.index(),a=o.child(i).marks.find(function(t){return t.type===e}),s=o.childCount,l=t.pos-t.textOffset,c=o.child(i).nodeSize;for(n=i-1;0<=n&&a.isInSet(o.child(n).marks);)c+=r=o.child(n).nodeSize,l-=r,n-=1;for(n=i+1;n<s&&a.isInSet(o.child(n).marks);)c+=o.child(n).nodeSize,n+=1;return{from:l,to:l+c}}o.isMarkActive=w,o.isNodeActive=M,o.isInListOfType=function(t,e){var n=t.selection,r=n.$anchor,o=n.$head,i=[],a=_(r),s=_(o);n.content().content.descendants(function(t){return i=i.concat([t]),!1});var l=i.filter(function(t){return k(t)!==k(h)&&k(t)!==k(m)});if(n instanceof p.TextSelection&&n.$cursor)return _(n.$cursor)===e.name;var c=1===f.unique(i.map(k)).length;if(0<l.length||!c)return!1;var d=f.first(i),u=[k(d)];return d.descendants(function(t){b(t)&&(u=u.concat([k(t)]))}),f.last(u)===e.name&&a===s&&a===e.name},o.activeNodeName=function(t){var e;if(t.selection instanceof p.AllSelection)e=t.doc;else{var n=t.selection.$anchor,r=n.node(n.blockRange().depth);e=k(r)===k(l)?n.node():r}return{name:k(e),tag:function(t){var e,n=t.type.spec.parseDOM,r=t.attrs;if(n&&n.length&&(e=1===n.length?n[0]:n.find(function(t){return JSON.stringify(t.attrs)===JSON.stringify(r)})),e)return e.tag}(e)}},o.canIndent=function(t,e){return M(t,e)&&i.sinkListItem(e)(t)},o.canOutdent=function(t,e){var n=!!S(m,2)(t.selection),r=!!S(h,2)(t.selection);return M(t,e)&&(n||r)&&i.liftListItem(e)(t)},o.findParentNode=C,o.findNthParentNode=x,o.findNthParentNodeOfType=S,o.getMark=function(t,e){var n,r=t.selection,o=r.from,i=r.$from,a=r.to,s=r.empty,l=t.doc;return s?n=e.isInSet(t.storedMarks||i.marks()):l.nodesBetween(o,a,function(t){t.isInline&&!n&&(n=e.isInSet(t.marks))}),n},o.getNodeFromSelection=function(t){if(t.selection instanceof p.NodeSelection)return t.selection.node},o.getMarkRange=E,o.removeMark=function(s){return function(t,e){var n=t.selection,r=n.from,o=n.to,i=n.$cursor;if(i){var a=E(i,s);e(t.tr.removeMark(a.from,a.to,s))}else e(t.tr.removeMark(r,o,s))}},o.toggleBold=r.toggleMark(a.schema.marks.strong),o.toggleItalic=r.toggleMark(a.schema.marks.em),o.toggleUnderline=r.toggleMark(a.schema.marks.underline),o.toggleStrikethrough=r.toggleMark(a.schema.marks.strikethrough),o.toggleSubscript=r.toggleMark(a.schema.marks.subscript),o.toggleSuperscript=r.toggleMark(a.schema.marks.superscript),o.createLink=function(n){return function(t,e){var m,g;w(t,a.schema.marks.link)?(m=a.schema.marks.link,g=n,function(t,n){var r=t.tr,e=t.selection,o=e.$cursor,i=e.from,a=e.to;if(o){var s=o.parent,l=o.index(),c=s.child(l).marks.find(function(t){return t.type===m}),d=s.childCount,u=o.pos-o.textOffset,p=s.child(l).nodeSize,f=void 0,h=void 0;for(f=l-1;0<=f&&c.isInSet(s.child(f).marks);)p+=h=s.child(f).nodeSize,u-=h,f-=1;for(f=l+1;f<d&&c.isInSet(s.child(f).marks);)p+=s.child(f).nodeSize,f+=1;r.removeMark(u,u+p,m),r.addMark(u,u+p,m.create(g)),n(r)}else r.doc.nodesBetween(i,a,function(t,e){t.isInline&&m.isInSet(t.marks)&&(r.removeMark(e,e+t.nodeSize,m),r.addMark(e,e+t.nodeSize,m.create(g)),n(r))})}(t,e)):r.toggleMark(a.schema.marks.link,n)(t,e)}},o.applyHeading=function(t){return r.setBlockType(c,{level:t})},o.applyParagraph=r.setBlockType(u),o.applyBlockquote=r.setBlockType(s),o.format=function(t){var e=t.tag;return e.match(/h\d\b/)?o.applyHeading(parseInt(e[1],10)):"p"===e?o.applyParagraph:"blockquote"===e?o.applyBlockquote:void 0},o.indent=i.sinkListItem(d),o.outdent=i.liftListItem(d),o.insertImage=function(r){return function(t,e){var n=y.createAndFill(r);e(t.tr.replaceSelectionWith(n))}},o.getHTML=function(t){var e=g.DOMSerializer.fromSchema(t.schema).serializeFragment(t.doc.content),n=document.createElement("div");return n.appendChild(e),n.innerHTML},o.createContentNode=function(t){var e=document.createElement("div");return e.innerHTML=f.safeString(t).trim(),g.DOMParser.fromSchema(a.schema).parse(e)},o.setHTML=function(n){return function(t,e){return e(t.tr.setSelection(new p.AllSelection(t.doc)).replaceSelectionWith(o.createContentNode(n)))}},o.hasSameMarkup=function(t,e){var n=g.Fragment.from(o.createContentNode(t)),r=g.Fragment.from(o.createContentNode(e));return n.eq(r)};var O=function(t){var e=t.selection,n=e.from,r=e.to,o=e.$from,i=[];return e.node?e.node.isBlock?i.push(e.node):o.parent&&o.parent.isBlock&&i.push(o.parent):t.doc.nodesBetween(n,r,function(t){t.isBlock&&i.push(t)}),i};o.alignBlocks=function(p){return function(l,c){var t=O(l),d=l.tr,u=!1;return t.forEach(function(e){if(e.type.isTextblock){var t={},n=p.find(function(t){return t.node===e.type.name});n&&(r=e,o=n.style,i=r.attrs.style,s=a=null,i&&o.forEach(function(t){s={style:t.name,value:/^.+$/,newValue:t.value},a=function(t,e){var n=e.style,r=e.value,o=e.newValue,i=[];if(t){var a=t.split(/\s*;\s*/).filter(function(t){return t}),s=a.filter(function(t){if(!t.toLowerCase().trim().startsWith(n))return!0;var e=t.split(":")[1].trim();return!r.test(e)||(i.push(e),!1)});return o&&s.push(n+": "+o),{style:s.join("; ")+(s.length?";":""),changed:!!o||s.length!==a.length,styleMatches:i}}return{changed:!1,styleMatches:i,style:null}}(i,s),i=a.changed?a.style:i}),i=i||o.reduce(function(t,e){return(t&&e.value?t+" ":"")+e.value?e.name+": "+e.value+";":""},""),t=Object.assign({},r.attrs,{style:i||null})),u=function(o,t,u,p,f,h){var e=o.selection,n=e.from,r=e.to,i=!1;if(o.doc.nodesBetween(n,r,function(t,e){if(i)return!1;if(t.isTextblock&&!t.hasMarkup(f,h))if(t.type===f)i=!0;else{var n=o.doc.resolve(e),r=n.index();i=n.parent.canReplaceWith(r,r+1,f)}}),!i)return!1;if(t){if(!f.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var m=u.steps.length;u.doc.nodesBetween(n,r,function(t,e){if(t.eq(p)&&t.isTextblock&&!t.hasMarkup(f,h)&&(a=u.doc,s=u.mapping.slice(m).map(e),l=f,c=a.resolve(s),d=c.index(),c.parent.canReplaceWith(d,d+1,l))){u.clearIncompatible(u.mapping.slice(m).map(e,1),f);var n=u.mapping.slice(m),r=n.map(e,1),o=n.map(e+t.nodeSize,1),i=new g.Slice(g.Fragment.from(f.create(h,null,t.marks)),0,0);return u.step(new v.ReplaceAroundStep(r,o,r+1,o-1,i,1,!0)),!1}var a,s,l,c,d})}return!0}(l,c,d,e,e.type,t)||u}var r,o,i,a,s}),u&&c(d.scrollIntoView()),u}},o.isAligned=function(t,n){var r=!1;return O(t).forEach(function(e){if(!r&&e.type.isTextblock&&e.attrs.style){var t=n.find(function(t){return t.node===e.type.name});t&&(r=t.style.every(function(t){return!!t.value&&new RegExp(t.name+":\\s?"+t.value,"i").test(e.attrs.style)}))}}),r}},function(t,e){t.exports=k},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(7),i=n(3),a={link:{attrs:{href:{default:""},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM:function(t){return["a",Object.assign({},{href:""},i.removeEmptyEntries(t.attrs)),0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em",0]}},strong:{parseDOM:[{tag:"strong"},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}],toDOM:function(){return["strong",0]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code",0]}},underline:{parseDOM:[{tag:"u"},{style:"text-decoration=underline"}],toDOM:function(){return["u",0]}},strikethrough:{parseDOM:[{tag:"del"},{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM:function(){return["del",0]}},subscript:{parseDOM:[{tag:"sub"},{style:"vertical-align=sub"}],toDOM:function(){return["sub",0]}},superscript:{parseDOM:[{tag:"sup"},{style:"vertical-align=super"}],toDOM:function(){return["sup",0]}}},s={doc:{content:"block+"},paragraph:{content:"inline*",group:"block",attrs:r.__assign({},{style:{default:null},class:{default:null},id:{default:null}}),parseDOM:[{tag:"p",getAttrs:i.serializeDOMAttrs}],toDOM:function(t){return i.isEmpty(t.attrs)?["p",0]:["p",i.removeEmptyEntries(t.attrs),0]}},blockquote:{content:"inline*",group:"block",attrs:r.__assign({},{style:{default:null},class:{default:null},id:{default:null}}),defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:function(t){return["blockquote",i.removeEmptyEntries(t.attrs),0]}},horizontalRule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}},heading:{attrs:r.__assign({level:{default:1}},{style:{default:null},class:{default:null},id:{default:null}}),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(t){var e=i.removeEntries(t.attrs,function(t){return"level"!==t});return["h"+t.attrs.level,i.removeEmptyEntries(e),0]}},codeBlock:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}},text:{group:"inline"},image:{inline:!0,attrs:r.__assign({},{style:{default:null},class:{default:null},id:{default:null}},{src:{},alt:{default:null},width:{default:null},height:{default:null}}),group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(t){return{src:t.getAttribute("src"),alt:t.getAttribute("alt"),width:t.getAttribute("width"),height:t.getAttribute("height")}}}],toDOM:function(t){return["img",i.removeEmptyEntries(t.attrs)]}},hardBreak:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}},listItem:{attrs:r.__assign({},{style:{default:null},class:{default:null},id:{default:null}}),content:"paragraph block*",marks:"_",parseDOM:[{tag:"li"}],toDOM:function(t){return["li",i.removeEmptyEntries(t.attrs),0]}},orderedList:{attrs:{order:{default:1}},content:"listItem+",group:"block",parseDOM:[{tag:"ol",getAttrs:function(t){return{order:t.hasAttribute("start")?parseInt(t.getAttribute("start"),10):1}}}],toDOM:function(t){return 1===t.attrs.order?["ol",0]:["ol",{start:t.attrs.order},0]}},bulletList:{content:"listItem+",group:"block",parseDOM:[{tag:"ul"}],toDOM:function(){return["ul",0]}}};e.schema=new o.Schema({nodes:s,marks:a})},function(t,e){t.exports=f},function(t,e){t.exports=b},function(t,e){t.exports=m},function(t,e){t.exports=u},function(t,e){t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.commandIcons={bold:"bold",italic:"italic",underline:"underline",strikethrough:"strikethrough",createLink:"link-horizontal",unlink:"unlink-horizontal",insertOrderedList:"list-ordered",insertUnorderedList:"list-unordered",indent:"indent-increase",outdent:"indent-decrease",alignLeft:"align-left",alignCenter:"align-center",alignRight:"align-right",alignJustify:"align-justify",viewSource:"html",undo:"undo",redo:"redo",insertImage:"image",subscript:"sub-script",superscript:"sup-script"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(2),a=n(3),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.valueChange=new o.EventEmitter,t}return r.__extends(t,e),n=t,Object.defineProperty(t.prototype,"outerWidth",{get:function(){if(this.element)return a.outerWidth(this.element.nativeElement)},enumerable:!0,configurable:!0}),r.__decorate([o.Input(),r.__metadata("design:type",String)],t.prototype,"textField",void 0),r.__decorate([o.Input(),r.__metadata("design:type",String)],t.prototype,"valueField",void 0),r.__decorate([o.Input(),r.__metadata("design:type",Boolean)],t.prototype,"valuePrimitive",void 0),r.__decorate([o.Input(),r.__metadata("design:type",String)],t.prototype,"value",void 0),r.__decorate([o.Input(),r.__metadata("design:type",Array)],t.prototype,"data",void 0),r.__decorate([o.Input(),r.__metadata("design:type",Object)],t.prototype,"defaultItem",void 0),r.__decorate([o.Input(),r.__metadata("design:type",Function)],t.prototype,"itemDisabled",void 0),r.__decorate([o.Output(),r.__metadata("design:type",o.EventEmitter)],t.prototype,"valueChange",void 0),r.__decorate([o.ViewChild("toolbarTemplate"),r.__metadata("design:type",o.TemplateRef)],t.prototype,"toolbarTemplate",void 0),r.__decorate([o.ViewChild("element"),r.__metadata("design:type",o.ElementRef)],t.prototype,"element",void 0),n=r.__decorate([o.Component({providers:[{provide:i.ToolBarToolComponent,useExisting:o.forwardRef(function(){return n})}],selector:"kendo-toolbar-dropdownlist",template:'\n        <ng-template #toolbarTemplate>\n            <kendo-dropdownlist #element\n                [defaultItem]="defaultItem"\n                [textField]="textField"\n                [valueField]="valueField"\n                [data]="data"\n                [value]="value"\n                [valuePrimitive]="valuePrimitive"\n                [itemDisabled]="itemDisabled"\n                (valueChange)="valueChange.emit($event)"\n            >\n            </kendo-dropdownlist>\n        </ng-template>\n    '})],t);var n}(i.ToolBarToolComponent);e.ToolBarDropDownListComponent=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(13),a=n(4),s=n(6),l=n(3),c=function(n){function t(t){var e=n.call(this,t)||this;return e.dialog=t,e.data={src:"",alt:"",width:"",height:""},e.src=new i.FormControl("",i.Validators.required),e.alt=new i.FormControl(""),e.width=new i.FormControl("",i.Validators.min(1)),e.height=new i.FormControl("",i.Validators.min(1)),e.imageData=new i.FormGroup({src:e.src,alt:e.alt,width:e.width,height:e.height}),e}return r.__extends(t,n),t.prototype.onCancelAction=function(){this.dialog.close()},t.prototype.onConfirmAction=function(){this.src.value&&(this.editor.exec("insertImage",this.getData()),this.dialog.close(),this.editor.focus())},t.prototype.setData=function(t){var e=s.getNodeFromSelection(t);e&&(this.src.patchValue(e.attrs.src),this.alt.patchValue(e.attrs.alt),this.width.patchValue(e.attrs.width),this.height.patchValue(e.attrs.height))},t.prototype.getData=function(){return{src:this.src.value,alt:this.alt.value,width:this.normalizeDimension(this.width.value),height:this.normalizeDimension(this.height.value)}},t.prototype.normalizeDimension=function(t){return Number.isNaN(parseInt(t,10))||parseInt(t,10)<=0?"":l.safeString(parseInt(t,10))},r.__decorate([o.Input(),r.__metadata("design:type",Object)],t.prototype,"editor",void 0),r.__decorate([o.Component({template:'\n        <kendo-dialog-titlebar>\n            Insert Image\n        </kendo-dialog-titlebar>\n        <div class="k-editor-dialog">\n            <div class="k-editor-dialog k-popup-edit-form k-window-content k-content" >\n                <div class="k-edit-form-container k-window-content">\n                    <div class="k-edit-label">\n                        <label for="k-editor-image-url">Web address</label>\n                    </div>\n                    <div class="k-edit-field">\n                        <input [formControl]="src" type="text" class="k-input k-textbox">\n                    </div>\n                    <div class="k-edit-label">\n                        <label for="k-editor-image-text">Alternate text</label>\n                    </div>\n                    <div class="k-edit-field">\n                        <input [formControl]="alt" type="text" class="k-input k-textbox">\n                    </div>\n                    <div class="k-edit-label">\n                        <label for="k-editor-image-width">Width (px)</label>\n                    </div>\n                    <div class="k-edit-field">\n                        <input [formControl]="width" type="text" class="k-input k-textbox">\n                    </div>\n                    <div class="k-edit-label">\n                        <label for="k-editor-image-height">Height (px)</label>\n                    </div>\n                    <div class="k-edit-field">\n                        <input [formControl]="height" type="text" class="k-input k-textbox">\n                    </div>\n                </div>\n            </div>\n        </div>\n        <kendo-dialog-actions>\n            <button kendoButton (click)="onCancelAction()">Cancel</button>\n            <button kendoButton [disabled]="imageData.invalid" (click)="onConfirmAction()" [primary]="true">Insert</button>\n        </kendo-dialog-actions>\n    '}),r.__metadata("design:paramtypes",[a.DialogRef])],t)}(a.DialogContentBase);e.ImageDialogComponent=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(4),a=function(n){function t(t){var e=n.call(this,t)||this;return e.dialog=t,e.data="",e}return r.__extends(t,n),t.prototype.onCancelAction=function(){this.dialog.close()},t.prototype.onConfirmAction=function(){this.editor.exec("setHTML",this.getData()),this.dialog.close(),this.editor.focus()},t.prototype.getData=function(){return this.textarea.nativeElement.value},t.prototype.setData=function(){this.data=this.indent(this.editor.getSource())},t.prototype.indent=function(t){return t.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")},r.__decorate([o.Input(),r.__metadata("design:type",Object)],t.prototype,"editor",void 0),r.__decorate([o.ViewChild("textarea"),r.__metadata("design:type",o.ElementRef)],t.prototype,"textarea",void 0),r.__decorate([o.Component({template:'\n        <kendo-dialog-titlebar>\n            View Source\n        </kendo-dialog-titlebar>\n        <textarea [value]="data" #textarea class="k-editor-textarea k-input"></textarea>\n        <kendo-dialog-actions>\n            <button kendoButton (click)="onCancelAction()">Cancel</button>\n            <button kendoButton (click)="onConfirmAction()" [primary]="true">Update</button>\n        </kendo-dialog-actions>\n    ',styles:["\n        >>> .k-editor-textarea {\n            height: 100%;\n        }\n    "]}),r.__metadata("design:paramtypes",[i.DialogRef])],t)}(i.DialogContentBase);e.SourceDialogComponent=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(4),a=n(8),s=n(6),l=function(n){function t(t){var e=n.call(this,t)||this;return e.dialog=t,e.data={href:"",title:"",target:void 0},e}return r.__extends(t,n),t.prototype.onCancelAction=function(){this.dialog.close()},t.prototype.onConfirmAction=function(){this.editor.exec("createLink",this.getData()),this.dialog.close(),this.editor.focus()},t.prototype.setData=function(t){var e=s.getMark(t,a.schema.marks.link);e&&(this.data={href:e.attrs.href,title:e.attrs.title,target:e.attrs.target})},t.prototype.getData=function(){return{href:this.href.nativeElement.value||void 0,title:this.title.nativeElement.value||void 0,target:this.target.nativeElement.checked?"_blank":void 0}},r.__decorate([o.Input(),r.__metadata("design:type",Object)],t.prototype,"editor",void 0),r.__decorate([o.ViewChild("href"),r.__metadata("design:type",o.ElementRef)],t.prototype,"href",void 0),r.__decorate([o.ViewChild("title"),r.__metadata("design:type",o.ElementRef)],t.prototype,"title",void 0),r.__decorate([o.ViewChild("target"),r.__metadata("design:type",o.ElementRef)],t.prototype,"target",void 0),r.__decorate([o.Component({template:'\n        <kendo-dialog-titlebar>\n            Insert Link\n        </kendo-dialog-titlebar>\n        <div class="k-editor-dialog">\n            <div class="k-editor-dialog k-popup-edit-form k-window-content k-content" >\n                <div class="k-edit-form-container k-window-content">\n                    <div class="k-edit-label">\n                        <label for="k-editor-link-url">Web address</label>\n                    </div>\n                    <div class="k-edit-field">\n                        <input #href [value]="data.href" type="text" class="k-input k-textbox">\n                    </div>\n                    <div class="k-edit-label k-editor-link-text-row">\n                        <label for="k-editor-link-text">Title</label>\n                    </div>\n                    <div class="k-edit-field k-editor-link-text-row">\n                        <input #title [value]="data.title" type="text" class="k-input k-textbox">\n                    </div>\n                    <div class="k-edit-field">\n                        <input #target type="checkbox" class="k-checkbox">\n                        <label for="k-editor-link-target" class="k-checkbox-label">Open link in new window</label>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <kendo-dialog-actions>\n            <button kendoButton (click)="onCancelAction()">Cancel</button>\n            <button kendoButton (click)="onConfirmAction()" [primary]="true">Insert</button>\n        </kendo-dialog-actions>\n    '}),r.__metadata("design:paramtypes",[i.DialogRef])],t)}(i.DialogContentBase);e.LinkDialogComponent=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var C=n(7),f=Math.pow(2,16);function c(t){return 65535&t}var h=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},a=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};a.prototype.recover=function(t){var e=0,n=c(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+(t-(65535&t))/f},a.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},a.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},a.prototype._map=function(t,e,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?r:0);if(t<s)break;var l=this.ranges[a+o],c=this.ranges[a+i],d=s+l;if(t<=d){var u=s+r+((l?t==s?-1:t==d?1:e:e)<0?0:c);if(n)return u;var p=a/3+(t-s)*f;return new h(u,e<0?t!=s:t!=d,p)}r+=c-l}return n?t+r:new h(t+r)},a.prototype.touches=function(t,e){for(var n=0,r=c(e),o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?n:0);if(t<s)break;var l=this.ranges[a+o];if(t<=s+l&&a==3*r)return!0;n+=this.ranges[a+i]-l}return!1},a.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),l=this.ranges[r+e],c=this.ranges[r+n];t(a,a+l,s,s+c),o+=c-l}},a.prototype.invert=function(){return new a(this.ranges,!this.inverted)},a.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},a.offset=function(t){return 0==t?a.empty:new a(t<0?[0,-t,0]:[0,0,t])},a.empty=new a([]);var r=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function o(t){var e=Error.call(this,t);return e.__proto__=o.prototype,e}r.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new r(this.maps,this.mirror,t,e)},r.prototype.copy=function(){return new r(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},r.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},r.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},r.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},r.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},r.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;0<=e;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&e<r?n-r-1:null)}},r.prototype.invert=function(){var t=new r;return t.appendMappingInverted(this),t},r.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},r.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},r.prototype._map=function(t,e,n){for(var r=!1,o=null,i=this.from;i<this.to;i++){var a=this.maps[i],s=o&&o[i];if(null!=s&&a.touches(t,s))t=a.recover(s);else{var l=a.mapResult(t,e);if(null!=l.recover){var c=this.getMirror(i);if(null!=c&&i<c&&c<this.to){if(l.deleted){i=c,t=this.maps[c].recover(l.recover);continue}(o||(o=Object.create(null)))[c]=l.recover}}l.deleted&&(r=!0),t=l.pos}}return n?t:new h(t,r)},((o.prototype=Object.create(Error.prototype)).constructor=o).prototype.name="TransformError";var i=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new r},s={before:{},docChanged:{}};function l(){throw new Error("Override me")}s.before.get=function(){return this.docs.length?this.docs[0]:this.doc},i.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new o(e.failed);return this},i.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},s.docChanged.get=function(){return 0<this.steps.length},i.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(i.prototype,s);var d=Object.create(null),u=function(){};u.prototype.apply=function(t){return l()},u.prototype.getMap=function(){return a.empty},u.prototype.invert=function(t){return l()},u.prototype.map=function(t){return l()},u.prototype.merge=function(t){return null},u.prototype.toJSON=function(){return l()},u.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=d[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},u.jsonID=function(t,e){if(t in d)throw new RangeError("Duplicate use of step JSON ID "+t);return(d[t]=e).prototype.jsonID=t,e};var p=function(t,e){this.doc=t,this.failed=e};p.ok=function(t){return new p(t,null)},p.fail=function(t){return new p(null,t)},p.fromReplace=function(t,e,n,r){try{return p.ok(t.replace(e,n,r))}catch(t){if(t instanceof C.ReplaceError)return p.fail(t.message);throw t}};var x=function(o){function r(t,e,n,r){o.call(this),this.from=t,this.to=e,this.slice=n,this.structure=!!r}return o&&(r.__proto__=o),((r.prototype=Object.create(o&&o.prototype)).constructor=r).prototype.apply=function(t){return this.structure&&m(t,this.from,this.to)?p.fail("Structure replace would overwrite content"):p.fromReplace(t,this.from,this.to,this.slice)},r.prototype.getMap=function(){return new a([this.from,this.to-this.from,this.slice.size])},r.prototype.invert=function(t){return new r(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},r.prototype.map=function(t){var e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted?null:new r(e.pos,Math.max(e.pos,n.pos),this.slice)},r.prototype.merge=function(t){if(!(t instanceof r)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var e=this.slice.size+t.slice.size==0?C.Slice.empty:new C.Slice(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new r(t.from,this.to,e,this.structure)}var n=this.slice.size+t.slice.size==0?C.Slice.empty:new C.Slice(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new r(this.from,this.to+(t.to-t.from),n,this.structure)},r.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},r.fromJSON=function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new r(e.from,e.to,C.Slice.fromJSON(t,e.slice),!!e.structure)},r}(u);u.jsonID("replace",x);var v=function(s){function i(t,e,n,r,o,i,a){s.call(this),this.from=t,this.to=e,this.gapFrom=n,this.gapTo=r,this.slice=o,this.insert=i,this.structure=!!a}return s&&(i.__proto__=s),((i.prototype=Object.create(s&&s.prototype)).constructor=i).prototype.apply=function(t){if(this.structure&&(m(t,this.from,this.gapFrom)||m(t,this.gapTo,this.to)))return p.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return p.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?p.fromReplace(t,this.from,this.to,n):p.fail("Content does not fit in gap")},i.prototype.getMap=function(){return new a([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},i.prototype.invert=function(t){var e=this.gapTo-this.gapFrom;return new i(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},i.prototype.map=function(t){var e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),r=t.map(this.gapFrom,-1),o=t.map(this.gapTo,1);return e.deleted&&n.deleted||r<e.pos||o>n.pos?null:new i(e.pos,n.pos,r,o,this.slice,this.insert,this.structure)},i.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},i.fromJSON=function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new i(e.from,e.to,e.gapFrom,e.gapTo,C.Slice.fromJSON(t,e.slice),e.insert,!!e.structure)},i}(u);function m(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;0<o&&0<i&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(0<o)for(var a=r.node(i).maybeChild(r.indexAfter(i));0<o;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}return!1}function g(t){return{type:t,attrs:null}}function y(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function k(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;0<=o;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(0<i)return null}if(r.parentOffset==r.parent.content.size)for(var a=r.depth-1;0<=a;a--){var s=r.indexAfter(a);if(r.node(a).canReplaceWith(s,s,n))return r.after(a+1);if(s<r.node(a).childCount)return null}}function b(t,e,n){for(var r=[],o=0;o<t.childCount;o++){var i=t.child(o);i.content.size&&(i=i.copy(b(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return C.Fragment.fromArray(r)}u.jsonID("replaceAround",v),i.prototype.lift=function(t,e){for(var n=t.$from,r=t.$to,o=t.depth,i=n.before(o+1),a=r.after(o+1),s=i,l=a,c=C.Fragment.empty,d=0,u=o,p=!1;e<u;u--)p||0<n.index(u)?(p=!0,c=C.Fragment.from(n.node(u).copy(c)),d++):s--;for(var f=C.Fragment.empty,h=0,m=o,g=!1;e<m;m--)g||r.after(m+1)<r.end(m)?(g=!0,f=C.Fragment.from(r.node(m).copy(f)),h++):l++;return this.step(new v(s,l,i,a,new C.Slice(c.append(f),d,h),c.size-d,!0))},i.prototype.wrap=function(t,e){for(var n=C.Fragment.empty,r=e.length-1;0<=r;r--)n=C.Fragment.from(e[r].type.create(e[r].attrs,n));var o=t.start,i=t.end;return this.step(new v(o,i,o,i,new C.Slice(n,0,0),e.length,!0))},i.prototype.setBlockType=function(t,e,d,u){var p=this;if(void 0===e&&(e=t),!d.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var f=this.steps.length;return this.doc.nodesBetween(t,e,function(t,e){if(t.isTextblock&&!t.hasMarkup(d,u)&&(i=p.doc,a=p.mapping.slice(f).map(e),s=d,l=i.resolve(a),c=l.index(),l.parent.canReplaceWith(c,c+1,s))){p.clearIncompatible(p.mapping.slice(f).map(e,1),d);var n=p.mapping.slice(f),r=n.map(e,1),o=n.map(e+t.nodeSize,1);return p.step(new v(r,o,r+1,o-1,new C.Slice(C.Fragment.from(d.create(u,null,t.marks)),0,0),1,!0)),!1}var i,a,s,l,c}),this},i.prototype.setNodeMarkup=function(t,e,n,r){var o=this.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");e||(e=o.type);var i=e.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(t,t+o.nodeSize,i);if(!e.validContent(o.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new v(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new C.Slice(C.Fragment.from(i),0,0),1,!0))},i.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var r=this.doc.resolve(t),o=C.Fragment.empty,i=C.Fragment.empty,a=r.depth,s=r.depth-e,l=e-1;s<a;a--,l--){o=C.Fragment.from(r.node(a).copy(o));var c=n&&n[l];i=C.Fragment.from(c?c.type.create(c.attrs,i):r.node(a).copy(i))}return this.step(new x(t,t,new C.Slice(o.append(i),e,e,!0)))},i.prototype.join=function(t,e){void 0===e&&(e=1);var n=new x(t-e,t+e,C.Slice.empty,!0);return this.step(n)};var _=function(r){function o(t,e,n){r.call(this),this.from=t,this.to=e,this.mark=n}return r&&(o.__proto__=r),((o.prototype=Object.create(r&&r.prototype)).constructor=o).prototype.apply=function(t){var n=this,e=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new C.Slice(b(e.content,function(t,e){return e.type.allowsMarkType(n.mark.type)?t.mark(n.mark.addToSet(t.marks)):t},o),e.openStart,e.openEnd);return p.fromReplace(t,this.from,this.to,i)},o.prototype.invert=function(){return new w(this.from,this.to,this.mark)},o.prototype.map=function(t){var e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new o(e.pos,n.pos,this.mark)},o.prototype.merge=function(t){if(t instanceof o&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new o(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},o.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},o.fromJSON=function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new o(e.from,e.to,t.markFromJSON(e.mark))},o}(u);u.jsonID("addMark",_);var w=function(r){function o(t,e,n){r.call(this),this.from=t,this.to=e,this.mark=n}return r&&(o.__proto__=r),((o.prototype=Object.create(r&&r.prototype)).constructor=o).prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=new C.Slice(b(n.content,function(t){return t.mark(e.mark.removeFromSet(t.marks))}),n.openStart,n.openEnd);return p.fromReplace(t,this.from,this.to,r)},o.prototype.invert=function(){return new _(this.from,this.to,this.mark)},o.prototype.map=function(t){var e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new o(e.pos,n.pos,this.mark)},o.prototype.merge=function(t){if(t instanceof o&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new o(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},o.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},o.fromJSON=function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new o(e.from,e.to,t.markFromJSON(e.mark))},o}(u);function M(t,e,n,r){if(void 0===n&&(n=e),void 0===r&&(r=C.Slice.empty),e==n&&!r.size)return null;var o=t.resolve(e),i=t.resolve(n);if(E(o,i,r))return new x(e,n,r);var a,s,l,c,d=(s=function t(e,n,r,o){var i=C.Fragment.empty,a=0,s=r[n];if(e.depth>n){var l=t(e,n+1,r,o||s);a=l.openEnd+1,i=C.Fragment.from(e.node(n+1).copy(l.content))}return s&&(i=i.append(s.content),a=s.openEnd),o&&(i=i.append(e.node(n).contentMatchAt(e.indexAfter(n)).fillBefore(C.Fragment.empty,!0)),a=0),{content:i,openEnd:a}}(a=o,0,function(t,e){for(var n=new O(t),r=1;e.size&&r<=3;r++)e=n.placeSlice(e.content,e.openStart,e.openEnd,r);for(;n.open.length;)n.closeNode();return n.placed}(o,r),!1),l=s.content,c=s.openEnd,new C.Slice(l,a.depth,c||0)),u=S(o,i,d);if(!u)return null;if(d.size!=u.size&&function(t,e,n){if(!e.parent.isTextblock)return!1;var r,o=n.openEnd?function(t,e){for(var n=1;n<e;n++)t=t.lastChild.content;return t.lastChild}(n.content,n.openEnd):t.node(t.depth-(n.openStart-n.openEnd));if(!o.isTextblock)return!1;for(var i=e.index();i<e.parent.childCount;i++)if(!o.type.allowsMarks(e.parent.child(i).marks))return!1;return n.openEnd?r=o.contentMatchAt(o.childCount):(r=o.contentMatchAt(o.childCount),n.size&&(r=r.matchFragment(n.content,n.openStart?1:0))),(r=r.matchFragment(e.parent.content,e.index()))&&r.validEnd}(o,i,d)){for(var p=i.depth,f=i.after(p);1<p&&f==i.end(--p);)++f;var h=S(o,t.resolve(f),d);if(h)return new v(e,f,n,i.end(),h,d.size)}return u.size||e!=n?new x(e,n,u):null}function S(t,e,n){var r=function t(e,n,r,o,i,a,s){var l,c=e.childCount,d=c-(0<s?1:0),u=a<0?n:r.node(i);l=a<0?u.contentMatchAt(d):1==c&&0<s?u.contentMatchAt(a?r.index(i):r.indexAfter(i)):u.contentMatchAt(r.indexAfter(i)).matchFragment(e,0<c&&a?1:0,d);var p=o.node(i);if(0<s&&i<o.depth){var f=p.content.cutByIndex(o.indexAfter(i)).addToStart(e.lastChild),h=l.fillBefore(f,!0);if(h&&h.size&&0<a&&1==c&&(h=null),h){var m=t(e.lastChild.content,e.lastChild,r,o,i+1,1==c?a-1:-1,s-1);if(m){var g=e.lastChild.copy(m);return h.size?e.cutByIndex(0,c-1).append(h).addToEnd(g):e.replaceChild(c-1,g)}}}0<s&&(l=l.matchType((1==c&&0<a?r.node(i+1):e.lastChild).type));var v=o.index(i);if(v==p.childCount&&!p.type.compatibleContent(n.type))return null;for(var y=l.fillBefore(p.content,!0,v),k=v;y&&k<p.content.childCount;k++)u.type.allowsMarks(p.content.child(k).marks)||(y=null);if(!y)return null;if(0<s){var b=function t(e,n,r,o,i){var a,s=e.content,l=s.childCount;if(a=0<=i?r.node(o).contentMatchAt(r.indexAfter(o)).matchFragment(s,0<i?1:0,l):e.contentMatchAt(l),0<n){var c=t(s.lastChild,n-1,r,o+1,1==l?i-1:-1);s=s.replaceChild(l-1,c)}return e.copy(s.append(a.fillBefore(C.Fragment.empty,!0)))}(e.lastChild,s-1,r,i+1,1==c?a-1:-1);e=e.replaceChild(c-1,b)}return e=e.append(y),o.depth>i&&(e=e.addToEnd(function t(e,n){var r=e.node(n),o=r.contentMatchAt(0).fillBefore(r.content,!0,e.index(n));return e.depth>n&&(o=o.addToEnd(t(e,n+1))),r.copy(o)}(o,i+1))),e}(n.content,t.node(0),t,e,0,n.openStart,n.openEnd);return r?function(t,e,n){for(;0<e&&0<n&&1==t.childCount;)t=t.firstChild.content,e--,n--;return new C.Slice(t,e,n)}(r,n.openStart,e.depth):null}function E(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}u.jsonID("removeMark",w),i.prototype.addMark=function(l,c,d){var e=this,u=[],p=[],f=null,h=null;return this.doc.nodesBetween(l,c,function(t,e,n){if(t.isInline){var r=t.marks;if(!d.isInSet(r)&&n.type.allowsMarkType(d.type)){for(var o=Math.max(e,l),i=Math.min(e+t.nodeSize,c),a=d.addToSet(r),s=0;s<r.length;s++)r[s].isInSet(a)||(f&&f.to==o&&f.mark.eq(r[s])?f.to=i:u.push(f=new w(o,i,r[s])));h&&h.to==o?h.to=i:p.push(h=new _(o,i,d))}}}),u.forEach(function(t){return e.step(t)}),p.forEach(function(t){return e.step(t)}),this},i.prototype.removeMark=function(d,u,p){var e=this;void 0===p&&(p=null);var f=[],h=0;return this.doc.nodesBetween(d,u,function(t,e){if(t.isInline){h++;var n=null;if(p instanceof C.MarkType){var r=p.isInSet(t.marks);r&&(n=[r])}else p?p.isInSet(t.marks)&&(n=[p]):n=t.marks;if(n&&n.length)for(var o=Math.min(e+t.nodeSize,u),i=0;i<n.length;i++){for(var a=n[i],s=void 0,l=0;l<f.length;l++){var c=f[l];c.step==h-1&&a.eq(f[l].style)&&(s=c)}s?(s.to=o,s.step=h):f.push({style:a,from:Math.max(e,d),to:o,step:h})}}}),f.forEach(function(t){return e.step(new w(t.from,t.to,t.style))}),this},i.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var r=this.doc.nodeAt(t),o=[],i=t+1,a=0;a<r.childCount;a++){var s=r.child(a),l=i+s.nodeSize,c=n.matchType(s.type,s.attrs);if(c){n=c;for(var d=0;d<s.marks.length;d++)e.allowsMarkType(s.marks[d].type)||this.step(new w(i,l,s.marks[d]))}else o.push(new x(i,l,C.Slice.empty));i=l}if(!n.validEnd){var u=n.fillBefore(C.Fragment.empty,!0);this.replace(i,i,new C.Slice(u,0,0))}for(var p=o.length-1;0<=p;p--)this.step(o[p]);return this},i.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=C.Slice.empty);var r=M(this.doc,t,e,n);return r&&this.step(r),this},i.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new C.Slice(C.Fragment.from(n),0,0))},i.prototype.delete=function(t,e){return this.replace(t,e,C.Slice.empty)},i.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var O=function(t){this.open=[];for(var e=0;e<=t.depth;e++){var n=t.node(e),r=n.contentMatchAt(t.indexAfter(e));this.open.push({parent:n,match:r,content:C.Fragment.empty,wrapper:!1,openEnd:0,depth:e})}this.placed=[]};function I(t,e,n){var r=t.content;if(1<e){var o=I(t.firstChild,e-1,1==t.childCount?n-1:0);r=t.content.replaceChild(0,o)}var i=t.type.contentMatch.fillBefore(r,0==n);return t.copy(i.append(r))}function D(t,e,n,r,o){if(e<n){var i=t.firstChild;t=t.replaceChild(0,i.copy(D(i.content,e+1,n,r,i)))}return r<e&&(t=o.contentMatchAt(0).fillBefore(t,!0).append(t)),t}function T(t,e){for(var n=[],r=Math.min(t.depth,e.depth);0<=r;r--){var o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;o==e.start(r)&&n.push(r)}return n}O.prototype.placeSlice=function(t,e,n,r,o){if(0<e){var i=t.firstChild,a=this.placeSlice(i.content,Math.max(0,e-1),n&&1==t.childCount?n-1:0,r,i);a.content!=i.content&&(e=a.content.size?(t=t.replaceChild(0,i.copy(a.content)),a.openStart+1):(1==t.childCount&&(n=0),t=t.cutByIndex(1),0))}var s=this.placeContent(t,e,n,r,o);if(2<r&&s.size&&0==e){for(var l=0;l<s.content.childCount;l++){var c=s.content.child(l);this.placeContent(c.content,0,n&&l==s.content.childCount.length-1?n-1:0,r,c)}s=C.Fragment.empty}return s},O.prototype.placeContent=function(t,e,n,r,o){for(var i=0;i<t.childCount;i++){for(var a=t.child(i),s=!1,l=i==t.childCount-1,c=this.open.length-1;0<=c;c--){var d=this.open[c],u=void 0;if(1<r&&(u=d.match.findWrapping(a.type))&&(!o||!u.length||u[u.length-1]!=o.type)){for(;this.open.length-1>c;)this.closeNode();for(var p=0;p<u.length;p++)d.match=d.match.matchType(u[p]),c++,d={parent:u[p].create(),match:u[p].contentMatch,content:C.Fragment.empty,wrapper:!0,openEnd:0,depth:c+p},this.open.push(d)}var f=d.match.matchType(a.type);if(!f){var h=d.match.fillBefore(C.Fragment.from(a));if(!h){if(o&&d.match.matchType(o.type))break;continue}for(var m=0;m<h.childCount;m++){var g=h.child(m);this.addNode(d,g,0),f=d.match.matchFragment(g)}}for(;this.open.length-1>c;)this.closeNode();a=a.mark(d.parent.type.allowedMarks(a.marks)),e&&(a=I(a,e,l?n:0),e=0),this.addNode(d,a,l?n:0),d.match=f,l&&(n=0),s=!0;break}if(!s)break}return 1<this.open.length&&(0<i&&i==t.childCount||o&&this.open[this.open.length-1].parent.type==o.type)&&this.closeNode(),new C.Slice(t.cutByIndex(i),e,n)},O.prototype.addNode=function(t,e,n){var r,o;t.content=(r=t.content,o=t.openEnd,o?r.replaceChild(r.childCount-1,function t(e,n){var r=e.content;if(1<n){var o=t(e.lastChild,n-1);r=e.content.replaceChild(e.childCount-1,o)}var i=e.contentMatchAt(e.childCount).fillBefore(C.Fragment.empty,!0);return e.copy(r.append(i))}(r.lastChild,o)):r).addToEnd(e),t.openEnd=n},O.prototype.closeNode=function(){var t=this.open.pop();0==t.content.size||(t.wrapper?this.addNode(this.open[this.open.length-1],t.parent.copy(t.content),t.openEnd+1):this.placed[t.depth]={depth:t.depth,content:t.content,openEnd:t.openEnd})},i.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var r=this.doc.resolve(t),o=this.doc.resolve(e);if(E(r,o,n))return this.step(new x(t,e,n));var i=T(r,this.doc.resolve(e));0==i[i.length-1]&&i.pop();var a=-(r.depth+1);i.unshift(a);for(var s=r.depth,l=r.pos-1;0<s;s--,l--){var c=r.node(s).type.spec;if(c.defining||c.isolating)break;-1<i.indexOf(s)?a=s:r.before(s)==l&&i.splice(1,0,-s)}for(var d=i.indexOf(a),u=[],p=n.openStart,f=n.content,h=0;;h++){var m=f.firstChild;if(u.push(m),h==n.openStart)break;f=m.content}0<p&&u[p-1].type.spec.defining&&r.node(d).type!=u[p-1].type?p-=1:2<=p&&u[p-1].isTextblock&&u[p-2].type.spec.defining&&r.node(d).type!=u[p-2].type&&(p-=2);for(var g=n.openStart;0<=g;g--){var v=(g+p+1)%(n.openStart+1),y=u[v];if(y)for(var k=0;k<i.length;k++){var b=i[(k+d)%i.length],_=!0;b<0&&(_=!1,b=-b);var w=r.node(b-1),M=r.index(b-1);if(w.canReplaceWith(M,M,y.type,y.marks))return this.replace(r.before(b),_?o.after(b):e,new C.Slice(D(n.content,0,n.openStart,v),v,n.openEnd))}}return this.replace(t,e,n)},i.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var r=k(this.doc,t,n.type);null!=r&&(t=e=r)}return this.replaceRange(t,e,new C.Slice(C.Fragment.from(n),0,0))},i.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=T(n,r),i=0;i<o.length;i++){var a=o[i],s=i==o.length-1;if(s&&0==a||n.node(a).type.contentMatch.validEnd)return this.delete(n.start(a),r.end(a));if(0<a&&(s||n.node(a-1).canReplace(n.index(a-1),r.indexAfter(a-1))))return this.delete(n.before(a),r.after(a))}for(var l=1;l<=n.depth;l++)if(t-n.start(l)==n.depth-l&&e>n.end(l))return this.delete(n.before(l),e);return this.delete(t,e)},e.Transform=i,e.TransformError=o,e.Step=u,e.StepResult=p,e.joinPoint=function(t,e,n){void 0===n&&(n=-1);for(var r=t.resolve(e),o=r.depth;;o--){var i=void 0,a=void 0;if(a=o==r.depth?(i=r.nodeBefore,r.nodeAfter):0<n?(i=r.node(o+1),r.node(o).maybeChild(r.index(o)+1)):(i=r.node(o).maybeChild(r.index(o)-1),r.node(o+1)),i&&!i.isTextblock&&y(i,a))return e;if(0==o)break;e=n<0?r.before(o):r.after(o)}},e.canJoin=function(t,e){var n=t.resolve(e),r=n.index();return y(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)},e.canSplit=function(t,e,n,r){void 0===n&&(n=1);var o=t.resolve(e),i=o.depth-n,a=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var s=o.depth-1,l=n-2;i<s;s--,l--){var c=o.node(s),d=o.index(s);if(c.type.spec.isolating)return!1;var u=c.content.cutByIndex(d,c.childCount),p=r&&r[l]||c;if(p!=c&&(u=u.replaceChild(0,p.type.create(p.attrs))),!c.canReplace(d+1,c.childCount)||!p.type.validContent(u))return!1}var f=o.indexAfter(i),h=r&&r[0];return o.node(i).canReplaceWith(f,f,h?h.type:o.node(i+1).type)},e.insertPoint=k,e.dropPoint=function(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var a=1;a<=(0==n.openStart&&n.size?2:1);a++)for(var s=r.depth;0<=s;s--){var l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,c=r.index(s)+(0<l?1:0);if(1==a?r.node(s).canReplace(c,c,o):r.node(s).contentMatchAt(c).findWrapping(o.firstChild.type))return 0==l?r.pos:l<0?r.before(s+1):r.after(s+1)}return null},e.liftTarget=function(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),n=t.depth;;--n){var r=t.$from.node(n),o=t.$from.index(n),i=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(o,i,e))return n;if(0==n||r.type.spec.isolating||(a=r,l=i,0!=(s=o)&&!a.canReplace(s,a.childCount)||l!=a.childCount&&!a.canReplace(0,l)))break}var a,s,l},e.findWrapping=function(t,e,n,r){void 0===r&&(r=t);var o=function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;var a=i.length?i[0]:e;return n.canReplaceWith(r,o,a)?i:null}(t,e),i=o&&function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.child(r),a=e.contentMatch.findWrapping(i.type);if(!a)return null;for(var s=(a.length?a[a.length-1]:e).contentMatch,l=r;s&&l<o;l++)s=s.matchType(n.child(l).type);return s&&s.validEnd?a:null}(r,e);return i?o.map(g).concat({type:e,attrs:n}).concat(i.map(g)):null},e.StepMap=a,e.MapResult=h,e.Mapping=r,e.AddMarkStep=_,e.RemoveMarkStep=w,e.ReplaceStep=x,e.ReplaceAroundStep=v,e.replaceStep=M},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){return{name:t,value:e}};e.alignLeftRules=[{node:"paragraph",style:[r("text-align","left")]},{node:"heading",style:[r("text-align","left")]},{node:"listItem",style:[r("text-align","left"),r("list-style-position","inside")]}],e.alignRightRules=[{node:"paragraph",style:[r("text-align","right")]},{node:"heading",style:[r("text-align","right")]},{node:"listItem",style:[r("text-align","right"),r("list-style-position","inside")]}],e.alignCenterRules=[{node:"paragraph",style:[r("text-align","center")]},{node:"heading",style:[r("text-align","center")]},{node:"listItem",style:[r("text-align","center"),r("list-style-position","inside")]}],e.alignRemoveRules=[{node:"paragraph",style:[r("text-align","")]},{node:"heading",style:[r("text-align","")]},{node:"listItem",style:[r("text-align",""),r("list-style-position","")]}]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(2),a=n(14),s=n(5),l=function(){function t(t,e){this.button=t,this.editor=e}return t.prototype.ngOnInit=function(){var e=this;this.button.icon||(this.button.icon=a.commandIcons[this.command]),this.subs=this.button.click.subscribe(function(){e.editor.openDialog(e.command)}),this.subs.add(this.editor.stateChange.subscribe(function(t){"createLink"===e.command&&(e.button.disabled=!t.link&&t.noSelection)}))},t.prototype.ngOnDestroy=function(){this.subs.unsubscribe()},r.__decorate([o.Input("kendoEditorDialog"),r.__metadata("design:type",String)],t.prototype,"command",void 0),r.__decorate([o.Directive({selector:"kendo-toolbar-button[kendoEditorDialog]"}),r.__param(1,o.Host()),r.__metadata("design:paramtypes",[i.ToolBarButtonComponent,s.EditorComponent])],t)}();e.EditorDialogDirective=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(2),a=n(3),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.valueChange=new o.EventEmitter,t}return r.__extends(t,e),n=t,Object.defineProperty(t.prototype,"outerWidth",{get:function(){if(this.element)return a.outerWidth(this.element.nativeElement)},enumerable:!0,configurable:!0}),r.__decorate([o.Input(),r.__metadata("design:type",String)],t.prototype,"textField",void 0),r.__decorate([o.Input(),r.__metadata("design:type",String)],t.prototype,"valueField",void 0),r.__decorate([o.Input(),r.__metadata("design:type",Array)],t.prototype,"data",void 0),r.__decorate([o.Input(),r.__metadata("design:type",String)],t.prototype,"value",void 0),r.__decorate([o.Input(),r.__metadata("design:type",String)],t.prototype,"placeholder",void 0),r.__decorate([o.Output(),r.__metadata("design:type",o.EventEmitter)],t.prototype,"valueChange",void 0),r.__decorate([o.ViewChild("toolbarTemplate"),r.__metadata("design:type",o.TemplateRef)],t.prototype,"toolbarTemplate",void 0),r.__decorate([o.ViewChild("element"),r.__metadata("design:type",o.ElementRef)],t.prototype,"element",void 0),n=r.__decorate([o.Component({providers:[{provide:i.ToolBarToolComponent,useExisting:o.forwardRef(function(){return n})}],selector:"kendo-toolbar-combobox",template:'\n        <ng-template #toolbarTemplate>\n            <kendo-combobox #element\n                [placeholder]="placeholder"\n                [textField]="textField"\n                [valueField]="valueField"\n                [data]="data"\n                [value]="value"\n                (valueChange)="valueChange.emit($event)"\n            >\n            </kendo-combobox>\n        </ng-template>\n    '})],t);var n}(i.ToolBarToolComponent);e.ToolBarComboBoxComponent=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(15),a=n(5),s=function(){function t(t,e){this.dropdownlist=t,this.editor=e,this.command="format"}return t.prototype.ngOnInit=function(){var r=this;this.dropdownlist.textField="text",this.dropdownlist.valueField="tag",this.dropdownlist.valuePrimitive=!0,this.dropdownlist.itemDisabled=function(t){return""===t.dataItem.tag},this.dropdownlist.data=[{text:"Paragraph",tag:"p"},{text:"Quotation",tag:"blockquote"},{text:"Heading 1",tag:"h1"},{text:"Heading 2",tag:"h2"},{text:"Heading 3",tag:"h3"},{text:"Heading 4",tag:"h4"},{text:"Heading 5",tag:"h5"},{text:"Heading 6",tag:"h6"}],this.dropdownlist.defaultItem={text:"Format",tag:""},this.dropdownlist.valueChange.subscribe(function(t){r.editor.exec("format",{tag:t}),r.editor.focus()}),this.editor.stateChange.subscribe(function(t){var e=t.format,n=r.dropdownlist.data.findIndex(function(t){return t.tag===e.tag});r.dropdownlist.value=-1!==n?e.tag:""})},r.__decorate([o.Input("kendoEditorDropDown"),r.__metadata("design:type",String)],t.prototype,"command",void 0),r.__decorate([o.Directive({selector:"kendo-toolbar-dropdownlist[kendoEditorDropDown]"}),r.__param(1,o.Host()),r.__metadata("design:paramtypes",[i.ToolBarDropDownListComponent,a.EditorComponent])],t)}();e.EditorDropDownDirective=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(2),a=n(14),s=n(5),l=function(){function t(t,e){this.button=t,this.editor=e}return t.prototype.ngOnInit=function(){var e=this;this.button.icon||(this.button.icon=a.commandIcons[this.command]),this.subs=this.button.click.subscribe(function(){e.editor.exec(e.command),e.editor.focus()}),this.subs.add(this.editor.stateChange.subscribe(function(t){"indent"===e.command||"outdent"===e.command?e.button.disabled=!t[e.command]:"unlink"===e.command?e.button.disabled=!t.link:"undo"===e.command||"redo"===e.command?e.button.disabled=t[e.command]:e.button.selected=t[e.command]}))},t.prototype.ngOnDestroy=function(){this.subs.unsubscribe()},r.__decorate([o.Input("kendoEditorButton"),r.__metadata("design:type",String)],t.prototype,"command",void 0),r.__decorate([o.Directive({selector:"kendo-toolbar-button[kendoEditorButton]"}),r.__param(1,o.Host()),r.__metadata("design:paramtypes",[i.ToolBarButtonComponent,s.EditorComponent])],t)}();e.EditorButtonDirective=l},function(t,e){t.exports=y},function(t,e){t.exports=v},function(t,e){t.exports=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(27),a=n(13),s=n(2),l=n(26),c=n(4),d=n(25),u=n(5),p=n(15),f=n(24),h=n(23),m=n(22),g=n(21),v=n(18),y=n(17),k=n(16),b=[f.EditorButtonDirective,h.EditorDropDownDirective,g.EditorDialogDirective],_=[p.ToolBarDropDownListComponent,m.ToolBarComboBoxComponent],w=[v.LinkDialogComponent,y.SourceDialogComponent,k.ImageDialogComponent],M=function(){function t(){}return r.__decorate([o.NgModule({declarations:[u.EditorComponent,b,_,w],exports:[u.EditorComponent,b,_,s.ToolBarModule,d.ButtonModule,a.FormsModule,a.ReactiveFormsModule],imports:[i.CommonModule,s.ToolBarModule,l.DropDownsModule,c.DialogModule,d.ButtonModule,a.FormsModule,a.ReactiveFormsModule],entryComponents:[w]})],t)}();e.EditorModule=M},function(t,p,e){"use strict";Object.defineProperty(p,"__esModule",{value:!0});var c=e(7),f=e(12),d=e(19),r=e(9),o=e(10);function u(t,e){var n=t.selection,r=n.from,o=n.to,i=t.schema.nodes.paragraph,a=[];e.doc.nodesBetween(r,o,function(t,e){t.type===i&&a.push({node:t,pos:e})});for(var s=a.length-1;0<=s;s--){var l=a[s],c=e.doc.resolve(e.mapping.map(l.pos));if(0<c.depth){var d;d=l.node.textContent&&0<l.node.textContent.length?e.doc.resolve(e.mapping.map(l.pos+l.node.textContent.length)):e.doc.resolve(e.mapping.map(l.pos+1));var u=c.blockRange(d);u&&e.lift(u,p.getListLiftTarget(t.schema,c))}}return e}function h(c){return function(t,e,n){if(!n)return!1;var r=(t=n.state).selection,o=r.$from,i=r.$to,a=o.node(-2),s=o.node(-3),l=v(t.doc,o,i,t.schema.nodes[c]);return(a&&a.type===t.schema.nodes[c]||s&&s.type===t.schema.nodes[c])&&l?k()(t,e):(l||(k()(t,e),t=n.state),b(t.schema.nodes[c])(t,e))}}function m(t,e,n){var r=e.$from,o=e.$to,i=t.schema.nodes.listItem,a=r.blockRange(o,function(t){return t.childCount&&t.firstChild.type===i});if(!a||a.depth<2||r.node(a.depth-1).type!==i)return n;var s=a.end,l=o.end(a.depth);return s<l&&(n.step(new d.ReplaceAroundStep(s-1,l,s,l,new c.Slice(c.Fragment.from(i.create(void 0,a.parent.copy())),1,0),1,!0)),a=new c.NodeRange(n.doc.resolve(r.pos),n.doc.resolve(l),a.depth)),n.lift(a,d.liftTarget(a)).scrollIntoView()}function g(a,s,t,l,c){var d=a.schema.nodes.listItem,u=!1;return c.doc.nodesBetween(s,t,function(t,e){if(!u&&t.type===d&&s<e){u=!0;for(var n=l+3;l+2<n;){var r=c.doc.resolve(c.mapping.map(e));n=r.depth;var o=c.doc.resolve(c.mapping.map(e+t.textContent.length)),i=new f.TextSelection(r,o);c=m(a,i,c)}}}),c}function v(t,e,n,r){return 0===i(t,e,n).filter(function(t){return t.type!==r}).length}function i(t,e,n){for(var r=Array(),o=y(t,e).depth,i=t.resolve(e.start(o));i.pos<=n.start(n.depth);){var a=Math.min(i.depth,o),s=i.node(a);if(s&&r.push(s),0===a)break;var l=t.resolve(i.after(a));if(l.start(a)>=t.nodeSize-2)break;l.depth!==i.depth&&(l=t.resolve(l.pos+2)),i=l.depth?t.resolve(l.start(l.depth)):t.resolve(l.end(l.depth))}return r}function y(t,e){var n=["blockquote","bulletList","orderedList"];if(1===e.depth)return e;for(var r=e.node(e.depth),o=e;1<=e.depth;)(r=(e=t.resolve(e.before(e.depth))).node(e.depth))&&-1!==n.indexOf(r.type.name)&&(o=e);return o}function k(){return function(i,t){var a=i.tr,e=i.selection,n=e.$from,r=e.$to;return a.doc.nodesBetween(n.pos,r.pos,function(t,e){if(t.isTextblock||"blockquote"===t.type.name||"panel"===t.type.name){var n=new f.NodeSelection(a.doc.resolve(a.mapping.map(e))),r=n.$from.blockRange(n.$to);if(!r||n.$from.parent.type!==i.schema.nodes.listItem)return!1;var o=r&&d.liftTarget(r);if(null==o)return!1;a.lift(r,o)}}),t&&t(a),!0}}function b(n){return r.autoJoin(o.wrapInList(n),function(t,e){return t.type===e.type&&t.type===n})}p.rootListDepth=function(t,e){for(var n,r=e.bulletList,o=e.orderedList,i=e.listItem,a=t.depth-1;0<a;a--){var s=t.node(a);if(s.type!==r&&s.type!==o||(n=a),s.type!==r&&s.type!==o&&s.type!==i)break}return n},p.getListLiftTarget=function(t,e){for(var n=e.depth,r=t.nodes,o=r.bulletList,i=r.orderedList,a=r.listItem,s=e.depth;0<s;s--){var l=e.node(s);if(l.type!==o&&l.type!==i||(n=s),l.type!==o&&l.type!==i&&l.type!==a)break}return n-1},p.liftSelectionList=u,p.toggleList=function(t,e,n,r){var o=t.selection,i=o.$from.node(o.$from.depth-2),a=o.$to.node(o.$to.depth-2);if(i&&i.type.name===r&&a&&a.type.name===r){var s=p.rootListDepth(o.$to,t.schema.nodes),l=g(t,o.$to.pos,o.$to.end(s),s,t.tr);return e(l=u(t,l)),!0}return h(r)(t,e,n)},p.toggleListCommand=h,p.liftFollowingList=g,p.isRangeOfType=v,p.getAncestorNodesBetween=i,p.findAncestorPosition=y,p.liftListItems=k,p.wrapInList=b,p.toggleUnorderedList=function(t,e,n){return p.toggleList(t,e,n,"bulletList")},p.toggleOrderedList=function(t,e,n){return p.toggleList(t,e,n,"orderedList")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),o=n(8),i=n(20),a=n(6),s=n(29),l={bold:function(){return a.toggleBold},italic:function(){return a.toggleItalic},createLink:function(t){return a.createLink(t)},unlink:function(){return a.removeMark(o.schema.marks.link)},underline:function(){return a.toggleUnderline},strikethrough:function(){return a.toggleStrikethrough},subscript:function(){return a.toggleSubscript},superscript:function(){return a.toggleSuperscript}},c={format:function(t){return a.format(t)},alignLeft:function(){return a.alignBlocks(i.alignLeftRules)},alignCenter:function(){return a.alignBlocks(i.alignCenterRules)},alignRight:function(){return a.alignBlocks(i.alignRightRules)},alignJustify:function(){return a.alignBlocks(i.alignRemoveRules)},indent:function(){return a.indent},outdent:function(){return a.outdent},insertOrderedList:function(){return s.toggleOrderedList},insertUnorderedList:function(){return s.toggleUnorderedList},getHTML:function(){return a.getHTML},setHTML:function(t){return a.setHTML(t)},undo:function(){return r.undo},redo:function(){return r.redo},insertImage:function(t){return a.insertImage(t)}};e.editorCommands=Object.assign({},l,c)},function(t,e){t.exports=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(9),s=n(10),l=n(11),c=n(31),d="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);e.buildKeymap=function(t,r){var o={};function e(t,e){if(r){var n=r[t];if(!1===n)return;n&&(t=n)}o[t]=e}if(e("Mod-z",l.undo),e("Shift-Mod-z",l.redo),e("Backspace",c.undoInputRule),d||e("Mod-y",l.redo),t.marks.strong&&e("Mod-b",a.toggleMark(t.marks.strong)),t.marks.em&&e("Mod-i",a.toggleMark(t.marks.em)),t.marks.underline&&e("Mod-u",a.toggleMark(t.marks.underline)),t.nodes.hardBreak){var n=t.nodes.hardBreak,i=a.chainCommands(a.exitCode,function(t,e){return e(t.tr.replaceSelectionWith(n.create()).scrollIntoView()),!0});e("Mod-Enter",i),e("Shift-Enter",i),d&&e("Ctrl-Enter",i)}return t.nodes.listItem&&e("Enter",s.splitListItem(t.nodes.listItem)),o}},function(t,e){t.exports=p},function(t,e){t.exports=h},function(t,e){t.exports=s},function(t,e){t.exports=d},function(t,e){t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5);e.EditorComponent=r.EditorComponent;var o=n(28);e.EditorModule=o.EditorModule,function(t){for(var e in t)i(e,t[e])}(e)}])}}});