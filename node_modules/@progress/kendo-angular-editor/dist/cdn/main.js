!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("tslib"),require("@angular/core"),require("@progress/kendo-angular-toolbar"),require("@progress/kendo-angular-dialog"),require("prosemirror-commands"),require("prosemirror-model"),require("@angular/forms"),require("prosemirror-state"),require("prosemirror-history"),require("prosemirror-schema-list"),require("rxjs/observable/fromEvent"),require("rxjs/operators/map"),require("rxjs/operators/filter"),require("prosemirror-view"),require("prosemirror-keymap"),require("prosemirror-inputrules"),require("@angular/common"),require("@progress/kendo-angular-dropdowns"),require("@progress/kendo-angular-buttons")):"function"==typeof define&&define.amd?define(["tslib","@angular/core","@progress/kendo-angular-toolbar","@progress/kendo-angular-dialog","prosemirror-commands","prosemirror-model","@angular/forms","prosemirror-state","prosemirror-history","prosemirror-schema-list","rxjs/observable/fromEvent","rxjs/operators/map","rxjs/operators/filter","prosemirror-view","prosemirror-keymap","prosemirror-inputrules","@angular/common","@progress/kendo-angular-dropdowns","@progress/kendo-angular-buttons"],e):"object"==typeof exports?exports.KendoAngularEditor=e(require("tslib"),require("@angular/core"),require("@progress/kendo-angular-toolbar"),require("@progress/kendo-angular-dialog"),require("prosemirror-commands"),require("prosemirror-model"),require("@angular/forms"),require("prosemirror-state"),require("prosemirror-history"),require("prosemirror-schema-list"),require("rxjs/observable/fromEvent"),require("rxjs/operators/map"),require("rxjs/operators/filter"),require("prosemirror-view"),require("prosemirror-keymap"),require("prosemirror-inputrules"),require("@angular/common"),require("@progress/kendo-angular-dropdowns"),require("@progress/kendo-angular-buttons")):t.KendoAngularEditor=e(t.tslib,t["@angular/core"],t["@progress/kendo-angular-toolbar"],t["@progress/kendo-angular-dialog"],t["prosemirror-commands"],t["prosemirror-model"],t["@angular/forms"],t["prosemirror-state"],t["prosemirror-history"],t["prosemirror-schema-list"],t["rxjs/observable/fromEvent"],t["rxjs/operators/map"],t["rxjs/operators/filter"],t["prosemirror-view"],t["prosemirror-keymap"],t["prosemirror-inputrules"],t["@angular/common"],t["@progress/kendo-angular-dropdowns"],t["@progress/kendo-angular-buttons"])}(window,function(t,e,n,r,o,i,a,s,l,u,d,c,p,f,h,m,g,v,y){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=21)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(10),a=n(22),s=n(23),l=n(24),u=n(2),d=n(4),c=n(25),p=n(6),f=n(11),h=n(26),m=n(12),g=n(7),v=n(27),y=n(29),k=n(14),b=n(16),_=n(17),w=n(18),x=n(9);var M={createLink:{content:b.LinkDialogComponent},viewSource:{content:_.SourceDialogComponent,width:500,height:400},insertImage:{content:w.ImageDialogComponent}},C=function(){function t(t,e){this.element=t,this.dialogService=e,this.valueChange=new o.EventEmitter,this.stateChange=new o.EventEmitter,this.onChangeCallback=function(t){},this.onTouchedCallback=function(t){}}return e=t,Object.defineProperty(t.prototype,"value",{get:function(){var t=this.view?this.getSource():this._value;return"<p></p>"===t?this._value?"":this._value:t},set:function(t){this._value=t,this._previousValue=t,this.view&&this.exec("setHTML",this._value)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return"k-widget k-editor"},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){var t=this,e=this,n=this.container.element.nativeElement,r=x.createContentNode(this.value),o=f.EditorState.create({schema:g.schema,doc:r,plugins:[m.history(),h.keymap(v.buildKeymap(g.schema)),h.keymap({"Mod-z":m.undo,"Mod-y":m.redo}),h.keymap(p.baseKeymap)]});this.view=new c.EditorView(n,{state:o,dispatchTransaction:function(t){var n;this.updateState(this.state.apply(t)),e.stateChange.emit((n=this.state,{bold:x.isMarkActive(n,g.schema.marks.strong),italic:x.isMarkActive(n,g.schema.marks.em),underline:x.isMarkActive(n,g.schema.marks.underline),strikethrough:x.isMarkActive(n,g.schema.marks.strikethrough),link:x.isMarkActive(n,g.schema.marks.link),subscript:x.isMarkActive(n,g.schema.marks.subscript),superscript:x.isMarkActive(n,g.schema.marks.superscript),format:x.activeNodeName(n),insertOrderedList:x.isInListOfType(n,g.schema.nodes.orderedList),insertUnorderedList:x.isInListOfType(n,g.schema.nodes.bulletList),indent:x.canIndent(n,g.schema.nodes.listItem),outdent:x.canOutdent(n,g.schema.nodes.listItem),alignLeft:x.isAligned(n,k.alignLeftRules),alignCenter:x.isAligned(n,k.alignCenterRules),alignRight:x.isAligned(n,k.alignRightRules),alignJustify:x.isAligned(n,k.alignRemoveRules),undo:!m.undo(n),redo:!m.redo(n),noSelection:n.selection.empty}))}}),this.subs=a.fromEvent(this.container.element.nativeElement,"keyup").pipe(s.map(function(t){return t.keyCode}),l.filter(function(t){return 121===t}),s.map(function(){return t.userToolBar||t.defaultToolbar})).subscribe(function(t){return t.nativeElement.focus()});var i=a.fromEvent(this.element.nativeElement,"focusout").pipe(l.filter(function(e){return!t.element.nativeElement.contains(e.relatedTarget)}));this.subs.add(i.pipe(s.map(function(){return t.value}),l.filter(function(t){return!x.hasSameMarkup(t,e._previousValue)})).subscribe(function(e){t._previousValue=e,t.onChangeCallback(e),t.valueChange.emit(e)})),this.subs.add(i.subscribe(function(){return t.onTouchedCallback()}))},t.prototype.exec=function(t,e){y.editorCommands[t](e)(this.view.state,this.view.dispatch,this.view)},t.prototype.openDialog=function(t){var e=M[t],n=this.dialogService.open(e);n.content.instance.editor=this,n.content.instance.setData(this.view.state)},t.prototype.focus=function(){this.view.focus()},t.prototype.blur=function(){this.view.dom.blur()},t.prototype.getSource=function(){return x.getHTML(this.view.state)},t.prototype.ngOnDestroy=function(){this.subs.unsubscribe()},t.prototype.writeValue=function(t){this.value=null===t?void 0:t},t.prototype.registerOnChange=function(t){this.onChangeCallback=t},t.prototype.registerOnTouched=function(t){this.onTouchedCallback=t},r.__decorate([o.Input(),r.__metadata("design:type",String),r.__metadata("design:paramtypes",[String])],t.prototype,"value",null),r.__decorate([o.Output(),r.__metadata("design:type",o.EventEmitter)],t.prototype,"valueChange",void 0),r.__decorate([o.HostBinding("class"),r.__metadata("design:type",String),r.__metadata("design:paramtypes",[])],t.prototype,"className",null),r.__decorate([o.ContentChild(u.ToolBarComponent,{read:o.ElementRef}),r.__metadata("design:type",o.ElementRef)],t.prototype,"userToolBar",void 0),r.__decorate([o.ViewChild("content",{read:o.ViewContainerRef}),r.__metadata("design:type",o.ViewContainerRef)],t.prototype,"container",void 0),r.__decorate([o.ViewChild("defaultToolbar",{read:o.ElementRef}),r.__metadata("design:type",o.ElementRef)],t.prototype,"defaultToolbar",void 0),t=e=r.__decorate([o.Component({selector:"kendo-editor",providers:[d.DialogService,{provide:i.NG_VALUE_ACCESSOR,useExisting:o.forwardRef(function(){return e}),multi:!0}],template:'\n        <ng-content select="kendo-toolbar"></ng-content>\n        <kendo-toolbar *ngIf="!userToolBar" #defaultToolbar>\n            <kendo-toolbar-buttongroup>\n                <kendo-toolbar-button kendoEditorButton="bold"></kendo-toolbar-button>\n                <kendo-toolbar-button kendoEditorButton="italic"></kendo-toolbar-button>\n                <kendo-toolbar-button kendoEditorButton="underline"></kendo-toolbar-button>\n            </kendo-toolbar-buttongroup>\n            <kendo-toolbar-dropdownlist kendoEditorDropDown="format"></kendo-toolbar-dropdownlist>\n            <kendo-toolbar-buttongroup>\n                <kendo-toolbar-button kendoEditorButton="insertUnorderedList"></kendo-toolbar-button>\n                <kendo-toolbar-button kendoEditorButton="insertOrderedList"></kendo-toolbar-button>\n            </kendo-toolbar-buttongroup>\n            \x3c!-- <kendo-toolbar-dialog kendoEditorCommand="createLink"></kendo-toolbar-dialog> --\x3e\n        </kendo-toolbar>\n        <div #content class="k-content" style="height: 300px;"></div>\n        <div kendoDialogContainer></div>\n    ',styles:["\n        >>> .k-content > .ProseMirror {\n            height: 100%;\n            width: 100%;\n            box-sizing: border-box;\n            outline: none;\n            overflow: scroll;\n        }\n    "]}),r.__metadata("design:paramtypes",[o.ElementRef,d.DialogService])],t);var e}();e.EditorComponent=C},function(t,e){t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.outerWidth=function(t){var e=t.offsetWidth,n=getComputedStyle(t);return e+=parseFloat(n.marginLeft)||0+parseFloat(n.marginRight)||0},e.serializeDOMAttrs=function(t){return Array.from(t.attributes).reduce(function(t,e){return Object.assign({},t,((n={})[e.name]=e.value,n));var n},{})},e.removeEntries=function(t,e){return Object.keys(t).filter(function(t){return e(t)}).reduce(function(e,n){return Object.assign(e,((r={})[n]=t[n],r));var r},{})},e.removeEmptyEntries=function(t){return e.removeEntries(t,function(e){return null!==t[e]&&void 0!==t[e]&&""!==t[e]})},e.isEmpty=function(t){return 0===Object.keys(t).length},e.isNullOrUndefined=function(t){return null==t},e.safeString=function(t){return e.isNullOrUndefined(t)?"":t.toString()},e.first=function(t){return t[0]},e.last=function(t){return t[t.length-1]},e.unique=function(t){return Array.from(new Set(t))}},function(t,e){t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(8),i=n(5),a={link:{attrs:{href:{default:""},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM:function(t){return["a",Object.assign({},{href:""},i.removeEmptyEntries(t.attrs)),0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em",0]}},strong:{parseDOM:[{tag:"strong"},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}],toDOM:function(){return["strong",0]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code",0]}},underline:{parseDOM:[{tag:"u"},{style:"text-decoration=underline"}],toDOM:function(){return["u",0]}},strikethrough:{parseDOM:[{tag:"del"},{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM:function(){return["del",0]}},subscript:{parseDOM:[{tag:"sub"},{style:"vertical-align=sub"}],toDOM:function(){return["sub",0]}},superscript:{parseDOM:[{tag:"sup"},{style:"vertical-align=super"}],toDOM:function(){return["sup",0]}}},s={doc:{content:"block+"},paragraph:{content:"inline*",group:"block",attrs:r.__assign({},{style:{default:null},class:{default:null},id:{default:null}}),parseDOM:[{tag:"p",getAttrs:i.serializeDOMAttrs}],toDOM:function(t){return i.isEmpty(t.attrs)?["p",0]:["p",i.removeEmptyEntries(t.attrs),0]}},blockquote:{content:"inline*",group:"block",attrs:r.__assign({},{style:{default:null},class:{default:null},id:{default:null}}),defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:function(t){return["blockquote",i.removeEmptyEntries(t.attrs),0]}},horizontalRule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}},heading:{attrs:r.__assign({level:{default:1}},{style:{default:null},class:{default:null},id:{default:null}}),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(t){var e=i.removeEntries(t.attrs,function(t){return"level"!==t});return["h"+t.attrs.level,i.removeEmptyEntries(e),0]}},codeBlock:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}},text:{group:"inline"},image:{inline:!0,attrs:r.__assign({},{style:{default:null},class:{default:null},id:{default:null}},{src:{},alt:{default:null},width:{default:null},height:{default:null}}),group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(t){return{src:t.getAttribute("src"),alt:t.getAttribute("alt"),width:t.getAttribute("width"),height:t.getAttribute("height")}}}],toDOM:function(t){return["img",i.removeEmptyEntries(t.attrs)]}},hardBreak:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}},listItem:{attrs:r.__assign({},{style:{default:null},class:{default:null},id:{default:null}}),content:"paragraph block*",marks:"_",parseDOM:[{tag:"li"}],toDOM:function(t){return["li",i.removeEmptyEntries(t.attrs),0]}},orderedList:{attrs:{order:{default:1}},content:"listItem+",group:"block",parseDOM:[{tag:"ol",getAttrs:function(t){return{order:t.hasAttribute("start")?parseInt(t.getAttribute("start"),10):1}}}],toDOM:function(t){return 1===t.attrs.order?["ol",0]:["ol",{start:t.attrs.order},0]}},bulletList:{content:"listItem+",group:"block",parseDOM:[{tag:"ul"}],toDOM:function(){return["ul",0]}}};e.schema=new o.Schema({nodes:s,marks:a})},function(t,e){t.exports=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),o=n(11),i=n(6),a=n(15),s=n(13),l=n(7),u=n(5),d=l.schema.nodes,c=d.blockquote,p=d.bulletList,f=d.doc,h=d.heading,m=d.listItem,g=d.orderedList,v=d.paragraph,y=d.image,k=function(t){return t instanceof r.Node?t.type.name:t.name},b=function(t){var e="string"==typeof t?t:k(t);return e===k(g)||e===k(p)},_=function(t){return Array.from(new Array(t.depth),function(e,n){return t.depth-n}).map(function(e){return t.node(e)}).map(k).find(b)};function w(t,e){var n=t.selection,r=n.from,o=n.$from,i=n.to;return n.empty?!!e.isInSet(t.storedMarks||o.marks()):!!t.doc.rangeHasMark(r,i,e)}function x(t,e,n){var r=C(function(t){return k(t)===k(e)})(t.selection);return!r||n&&!Object.keys(n).length?!!r:r.node.hasMarkup(e,n)}function M(t){var e,n=t.type.spec.parseDOM,r=t.attrs;if(n&&n.length&&(e=1===n.length?n[0]:n.find(function(t){return JSON.stringify(t.attrs)===JSON.stringify(r)})),e)return e.tag}function C(t){return function(e){for(var n=e.$from,r=n.depth;r>0;r--){var o=n.node(r);if(t(o))return{depth:r,node:o}}}}function S(t,e){return void 0===e&&(e=1),function(n){for(var r=n.$from,o=r.depth;o>0;o--){var i=r.node(o);if(t(i)&&0===(e-=1))return{depth:o,node:i}}}}function E(t,e){return void 0===e&&(e=1),function(n){return S(function(e){return k(e)===k(t)},e)(n)}}function O(t,e){var n,r,o=t.parent,i=t.index(),a=o.child(i).marks.find(function(t){return t.type===e}),s=o.childCount,l=t.pos-t.textOffset,u=o.child(i).nodeSize;for(n=i-1;n>=0&&a.isInSet(o.child(n).marks);)u+=r=o.child(n).nodeSize,l-=r,n-=1;for(n=i+1;n<s&&a.isInSet(o.child(n).marks);)u+=o.child(n).nodeSize,n+=1;return{from:l,to:l+u}}e.isMarkActive=w,e.isNodeActive=x,e.isInListOfType=function(t,e){var n=t.selection,r=n.$anchor,i=n.$head,a=[],s=_(r),l=_(i);n.content().content.descendants(function(t){return a=a.concat([t]),!1});var d=a.filter(function(t){return k(t)!==k(p)&&k(t)!==k(g)});if(n instanceof o.TextSelection&&n.$cursor)return _(n.$cursor)===e.name;var c=1===u.unique(a.map(k)).length;if(d.length>0||!c)return!1;var f=u.first(a),h=[k(f)];return f.descendants(function(t){b(t)&&(h=h.concat([k(t)]))}),u.last(h)===e.name&&(s===l&&s===e.name)},e.activeNodeName=function(t){var e;if(t.selection instanceof o.AllSelection)e=t.doc;else{var n=t.selection.$anchor,r=n.node(n.blockRange().depth);e=k(r)===k(f)?n.node():r}return{name:k(e),tag:M(e)}},e.canIndent=function(t,e){return x(t,e)&&s.sinkListItem(e)(t)},e.canOutdent=function(t,e){var n=!!E(g,2)(t.selection),r=!!E(p,2)(t.selection);return x(t,e)&&(n||r)&&s.liftListItem(e)(t)},e.findParentNode=C,e.findNthParentNode=S,e.findNthParentNodeOfType=E,e.getMark=function(t,e){var n,r=t.selection,o=r.from,i=r.$from,a=r.to,s=r.empty,l=t.doc;return s?n=e.isInSet(t.storedMarks||i.marks()):l.nodesBetween(o,a,function(t){t.isInline&&!n&&(n=e.isInSet(t.marks))}),n},e.getNodeFromSelection=function(t){if(t.selection instanceof o.NodeSelection)return t.selection.node},e.getMarkRange=O,e.removeMark=function(t){return function(e,n){var r=e.selection,o=r.from,i=r.to,a=r.$cursor;if(a){var s=O(a,t);n(e.tr.removeMark(s.from,s.to,t))}else n(e.tr.removeMark(o,i,t))}};e.toggleBold=i.toggleMark(l.schema.marks.strong),e.toggleItalic=i.toggleMark(l.schema.marks.em),e.toggleUnderline=i.toggleMark(l.schema.marks.underline),e.toggleStrikethrough=i.toggleMark(l.schema.marks.strikethrough),e.toggleSubscript=i.toggleMark(l.schema.marks.subscript),e.toggleSuperscript=i.toggleMark(l.schema.marks.superscript),e.createLink=function(t){return function(e,n){var r,o;w(e,l.schema.marks.link)?(r=l.schema.marks.link,o=t,function(t,e){var n=t.tr,i=t.selection,a=i.$cursor,s=i.from,l=i.to;if(a){var u=a.parent,d=a.index(),c=u.child(d).marks.find(function(t){return t.type===r}),p=u.childCount,f=a.pos-a.textOffset,h=u.child(d).nodeSize,m=void 0,g=void 0;for(m=d-1;m>=0&&c.isInSet(u.child(m).marks);)h+=g=u.child(m).nodeSize,f-=g,m-=1;for(m=d+1;m<p&&c.isInSet(u.child(m).marks);)h+=u.child(m).nodeSize,m+=1;n.removeMark(f,f+h,r),n.addMark(f,f+h,r.create(o)),e(n)}else n.doc.nodesBetween(s,l,function(t,i){t.isInline&&r.isInSet(t.marks)&&(n.removeMark(i,i+t.nodeSize,r),n.addMark(i,i+t.nodeSize,r.create(o)),e(n))})})(e,n):i.toggleMark(l.schema.marks.link,t)(e,n)}},e.applyHeading=function(t){return i.setBlockType(h,{level:t})},e.applyParagraph=i.setBlockType(v),e.applyBlockquote=i.setBlockType(c),e.format=function(t){var n=t.tag;return n.match(/h\d\b/)?e.applyHeading(parseInt(n[1],10)):"p"===n?e.applyParagraph:"blockquote"===n?e.applyBlockquote:void 0},e.indent=s.sinkListItem(m),e.outdent=s.liftListItem(m),e.insertImage=function(t){return function(e,n){var r=y.createAndFill(t);n(e.tr.replaceSelectionWith(r))}},e.getHTML=function(t){var e=r.DOMSerializer.fromSchema(t.schema).serializeFragment(t.doc.content),n=document.createElement("div");return n.appendChild(e),n.innerHTML},e.createContentNode=function(t){var e=document.createElement("div");return e.innerHTML=u.safeString(t).trim(),r.DOMParser.fromSchema(l.schema).parse(e)},e.setHTML=function(t){return function(n,r){return r(n.tr.setSelection(new o.AllSelection(n.doc)).replaceSelectionWith(e.createContentNode(t)))}},e.hasSameMarkup=function(t,n){var o=r.Fragment.from(e.createContentNode(t)),i=r.Fragment.from(e.createContentNode(n));return o.eq(i)};var I=function(t){var e=t.selection,n=e.from,r=e.to,o=e.$from,i=[];return e.node?e.node.isBlock?i.push(e.node):o.parent&&o.parent.isBlock&&i.push(o.parent):t.doc.nodesBetween(n,r,function(t){t.isBlock&&i.push(t)}),i};e.alignBlocks=function(t){return function(e,n){var o=I(e),i=e.tr,s=!1;return o.forEach(function(o){if(o.type.isTextblock){var l={},u=t.find(function(t){return t.node===o.type.name});u&&(l=function(t,e){var n=t.attrs.style,r=null,o=null;n&&e.forEach(function(t){o={style:t.name,value:/^.+$/,newValue:t.value},r=function(t,e){var n=e.style,r=e.value,o=e.newValue,i=[];if(t){var a=t.split(/\s*;\s*/).filter(function(t){return t}),s=a.filter(function(t){if(!t.toLowerCase().trim().startsWith(n))return!0;var e=t.split(":")[1].trim();return!r.test(e)||(i.push(e),!1)});return o&&s.push(n+": "+o),{style:s.join("; ")+(s.length?";":""),changed:!!o||s.length!==a.length,styleMatches:i}}return{changed:!1,styleMatches:i,style:null}}(n,o),n=r.changed?r.style:n});return n=n||e.reduce(function(t,e){return(t&&e.value?t+" ":"")+e.value?e.name+": "+e.value+";":""},""),Object.assign({},t.attrs,{style:n||null})}(o,u.style)),s=function(t,e,n,o,i,s){var l=t.selection,u=l.from,d=l.to,c=!1;if(t.doc.nodesBetween(u,d,function(e,n){if(c)return!1;if(e.isTextblock&&!e.hasMarkup(i,s))if(e.type===i)c=!0;else{var r=t.doc.resolve(n),o=r.index();c=r.parent.canReplaceWith(o,o+1,i)}}),!c)return!1;if(e){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var p=n.steps.length;n.doc.nodesBetween(u,d,function(t,e){if(t.eq(o)&&t.isTextblock&&!t.hasMarkup(i,s)&&function(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(n.doc,n.mapping.slice(p).map(e),i)){n.clearIncompatible(n.mapping.slice(p).map(e,1),i);var l=n.mapping.slice(p),u=l.map(e,1),d=l.map(e+t.nodeSize,1),c=new r.Slice(r.Fragment.from(i.create(s,null,t.marks)),0,0);return n.step(new a.ReplaceAroundStep(u,d,u+1,d-1,c,1,!0)),!1}})}return!0}(e,n,i,o,o.type,l)||s}}),s&&n(i.scrollIntoView()),s}},e.isAligned=function(t,e){var n=I(t),r=!1;return n.forEach(function(t){if(!r&&t.type.isTextblock&&t.attrs.style){var n=e.find(function(e){return e.node===t.type.name});n&&(r=n.style.every(function(e){return!!e.value&&new RegExp(e.name+":\\s?"+e.value,"i").test(t.attrs.style)}))}}),r}},function(t,e){t.exports=a},function(t,e){t.exports=s},function(t,e){t.exports=l},function(t,e){t.exports=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){return{name:t,value:e}};e.alignLeftRules=[{node:"paragraph",style:[r("text-align","left")]},{node:"heading",style:[r("text-align","left")]},{node:"listItem",style:[r("text-align","left"),r("list-style-position","inside")]}],e.alignRightRules=[{node:"paragraph",style:[r("text-align","right")]},{node:"heading",style:[r("text-align","right")]},{node:"listItem",style:[r("text-align","right"),r("list-style-position","inside")]}],e.alignCenterRules=[{node:"paragraph",style:[r("text-align","center")]},{node:"heading",style:[r("text-align","center")]},{node:"listItem",style:[r("text-align","center"),r("list-style-position","inside")]}],e.alignRemoveRules=[{node:"paragraph",style:[r("text-align","")]},{node:"heading",style:[r("text-align","")]},{node:"listItem",style:[r("text-align",""),r("list-style-position","")]}]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),o=65535,i=Math.pow(2,16);function a(t){return t&o}var s=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},l=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};l.prototype.recover=function(t){var e=0,n=a(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+function(t){return(t-(t&o))/i}(t)},l.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},l.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},l.prototype._map=function(t,e,n){for(var r=0,o=this.inverted?2:1,a=this.inverted?1:2,l=0;l<this.ranges.length;l+=3){var u=this.ranges[l]-(this.inverted?r:0);if(u>t)break;var d=this.ranges[l+o],c=this.ranges[l+a],p=u+d;if(t<=p){var f=u+r+((d?t==u?-1:t==p?1:e:e)<0?0:c);if(n)return f;var h=l/3+(t-u)*i;return new s(f,e<0?t!=u:t!=p,h)}r+=c-d}return n?t+r:new s(t+r)},l.prototype.touches=function(t,e){for(var n=0,r=a(e),o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var l=this.ranges[s]-(this.inverted?n:0);if(l>t)break;var u=this.ranges[s+o];if(t<=l+u&&s==3*r)return!0;n+=this.ranges[s+i]-u}return!1},l.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),l=this.ranges[r+e],u=this.ranges[r+n];t(a,a+l,s,s+u),o+=u-l}},l.prototype.invert=function(){return new l(this.ranges,!this.inverted)},l.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},l.offset=function(t){return 0==t?l.empty:new l(t<0?[0,-t,0]:[0,0,t])},l.empty=new l([]);var u=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function d(t){var e=Error.call(this,t);return e.__proto__=d.prototype,e}u.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new u(this.maps,this.mirror,t,e)},u.prototype.copy=function(){return new u(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},u.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},u.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},u.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},u.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},u.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},u.prototype.invert=function(){var t=new u;return t.appendMappingInverted(this),t},u.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},u.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},u.prototype._map=function(t,e,n){for(var r=!1,o=null,i=this.from;i<this.to;i++){var a=this.maps[i],l=o&&o[i];if(null!=l&&a.touches(t,l))t=a.recover(l);else{var u=a.mapResult(t,e);if(null!=u.recover){var d=this.getMirror(i);if(null!=d&&d>i&&d<this.to){if(u.deleted){i=d,t=this.maps[d].recover(u.recover);continue}(o||(o=Object.create(null)))[d]=u.recover}}u.deleted&&(r=!0),t=u.pos}}return n?t:new s(t,r)},d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="TransformError";var c=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new u},p={before:{},docChanged:{}};function f(){throw new Error("Override me")}p.before.get=function(){return this.docs.length?this.docs[0]:this.doc},c.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new d(e.failed);return this},c.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},p.docChanged.get=function(){return this.steps.length>0},c.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(c.prototype,p);var h=Object.create(null),m=function(){};m.prototype.apply=function(t){return f()},m.prototype.getMap=function(){return l.empty},m.prototype.invert=function(t){return f()},m.prototype.map=function(t){return f()},m.prototype.merge=function(t){return null},m.prototype.toJSON=function(){return f()},m.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=h[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},m.jsonID=function(t,e){if(t in h)throw new RangeError("Duplicate use of step JSON ID "+t);return h[t]=e,e.prototype.jsonID=t,e};var g=function(t,e){this.doc=t,this.failed=e};g.ok=function(t){return new g(t,null)},g.fail=function(t){return new g(null,t)},g.fromReplace=function(t,e,n,o){try{return g.ok(t.replace(e,n,o))}catch(t){if(t instanceof r.ReplaceError)return g.fail(t.message);throw t}};var v=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&k(t,this.from,this.to)?g.fail("Structure replace would overwrite content"):g.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new l([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?r.Slice.empty:new r.Slice(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var o=this.slice.size+t.slice.size==0?r.Slice.empty:new r.Slice(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),o,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,r.Slice.fromJSON(t,n.slice),!!n.structure)},e}(m);m.jsonID("replace",v);var y=function(t){function e(e,n,r,o,i,a,s){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=a,this.structure=!!s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(k(t,this.from,this.gapFrom)||k(t,this.gapTo,this.to)))return g.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return g.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?g.fromReplace(t,this.from,this.to,n):g.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new l([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,r.Slice.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(m);function k(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var a=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}return!1}function b(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function _(t){return{type:t,attrs:null}}function w(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function x(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var a=r.depth-1;a>=0;a--){var s=r.indexAfter(a);if(r.node(a).canReplaceWith(s,s,n))return r.after(a+1);if(s<r.node(a).childCount)return null}}function M(t,e,n){for(var o=[],i=0;i<t.childCount;i++){var a=t.child(i);a.content.size&&(a=a.copy(M(a.content,e,a))),a.isInline&&(a=e(a,n,i)),o.push(a)}return r.Fragment.fromArray(o)}m.jsonID("replaceAround",y),c.prototype.lift=function(t,e){for(var n=t.$from,o=t.$to,i=t.depth,a=n.before(i+1),s=o.after(i+1),l=a,u=s,d=r.Fragment.empty,c=0,p=i,f=!1;p>e;p--)f||n.index(p)>0?(f=!0,d=r.Fragment.from(n.node(p).copy(d)),c++):l--;for(var h=r.Fragment.empty,m=0,g=i,v=!1;g>e;g--)v||o.after(g+1)<o.end(g)?(v=!0,h=r.Fragment.from(o.node(g).copy(h)),m++):u++;return this.step(new y(l,u,a,s,new r.Slice(d.append(h),c,m),d.size-c,!0))},c.prototype.wrap=function(t,e){for(var n=r.Fragment.empty,o=e.length-1;o>=0;o--)n=r.Fragment.from(e[o].type.create(e[o].attrs,n));var i=t.start,a=t.end;return this.step(new y(i,a,i,a,new r.Slice(n,0,0),e.length,!0))},c.prototype.setBlockType=function(t,e,n,o){var i=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var a=this.steps.length;return this.doc.nodesBetween(t,e,function(t,e){if(t.isTextblock&&!t.hasMarkup(n,o)&&function(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(i.doc,i.mapping.slice(a).map(e),n)){i.clearIncompatible(i.mapping.slice(a).map(e,1),n);var s=i.mapping.slice(a),l=s.map(e,1),u=s.map(e+t.nodeSize,1);return i.step(new y(l,u,l+1,u-1,new r.Slice(r.Fragment.from(n.create(o,null,t.marks)),0,0),1,!0)),!1}}),this},c.prototype.setNodeMarkup=function(t,e,n,o){var i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");e||(e=i.type);var a=e.create(n,null,o||i.marks);if(i.isLeaf)return this.replaceWith(t,t+i.nodeSize,a);if(!e.validContent(i.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new y(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new r.Slice(r.Fragment.from(a),0,0),1,!0))},c.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var o=this.doc.resolve(t),i=r.Fragment.empty,a=r.Fragment.empty,s=o.depth,l=o.depth-e,u=e-1;s>l;s--,u--){i=r.Fragment.from(o.node(s).copy(i));var d=n&&n[u];a=r.Fragment.from(d?d.type.create(d.attrs,a):o.node(s).copy(a))}return this.step(new v(t,t,new r.Slice(i.append(a),e,e,!0)))},c.prototype.join=function(t,e){void 0===e&&(e=1);var n=new v(t-e,t+e,r.Slice.empty,!0);return this.step(n)};var C=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=t.resolve(this.from),i=o.node(o.sharedDepth(this.to)),a=new r.Slice(M(n.content,function(t,n){return n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t},i),n.openStart,n.openEnd);return g.fromReplace(t,this.from,this.to,a)},e.prototype.invert=function(){return new S(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(m);m.jsonID("addMark",C);var S=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=new r.Slice(M(n.content,function(t){return t.mark(e.mark.removeFromSet(t.marks))}),n.openStart,n.openEnd);return g.fromReplace(t,this.from,this.to,o)},e.prototype.invert=function(){return new C(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(m);function E(t,e,n,o){if(void 0===n&&(n=e),void 0===o&&(o=r.Slice.empty),e==n&&!o.size)return null;var i=t.resolve(e),a=t.resolve(n);if(D(i,a,o))return new v(e,n,o);var s=function(t,e){var n=function t(e,n,o,i){var a=r.Fragment.empty,s=0,l=o[n];if(e.depth>n){var u=t(e,n+1,o,i||l);s=u.openEnd+1,a=r.Fragment.from(e.node(n+1).copy(u.content))}l&&(a=a.append(l.content),s=l.openEnd);i&&(a=a.append(e.node(n).contentMatchAt(e.indexAfter(n)).fillBefore(r.Fragment.empty,!0)),s=0);return{content:a,openEnd:s}}(t,0,e,!1),o=n.content,i=n.openEnd;return new r.Slice(o,t.depth,i||0)}(i,function(t,e){for(var n=new T(t),r=1;e.size&&r<=3;r++)e=n.placeSlice(e.content,e.openStart,e.openEnd,r);for(;n.open.length;)n.closeNode();return n.placed}(i,o)),l=I(i,a,s);if(!l)return null;if(s.size!=l.size&&function(t,e,n){if(!e.parent.isTextblock)return!1;var r,o=n.openEnd?function(t,e){for(var n=1;n<e;n++)t=t.lastChild.content;return t.lastChild}(n.content,n.openEnd):t.node(t.depth-(n.openStart-n.openEnd));if(!o.isTextblock)return!1;for(var i=e.index();i<e.parent.childCount;i++)if(!o.type.allowsMarks(e.parent.child(i).marks))return!1;n.openEnd?r=o.contentMatchAt(o.childCount):(r=o.contentMatchAt(o.childCount),n.size&&(r=r.matchFragment(n.content,n.openStart?1:0)));return(r=r.matchFragment(e.parent.content,e.index()))&&r.validEnd}(i,a,s)){for(var u=a.depth,d=a.after(u);u>1&&d==a.end(--u);)++d;var c=I(i,t.resolve(d),s);if(c)return new y(e,d,n,a.end(),c,s.size)}return l.size||e!=n?new v(e,n,l):null}function O(t,e,n,o,i,a,s){var l,u=t.childCount,d=u-(s>0?1:0),c=a<0?e:n.node(i);l=a<0?c.contentMatchAt(d):1==u&&s>0?c.contentMatchAt(a?n.index(i):n.indexAfter(i)):c.contentMatchAt(n.indexAfter(i)).matchFragment(t,u>0&&a?1:0,d);var p=o.node(i);if(s>0&&i<o.depth){var f=p.content.cutByIndex(o.indexAfter(i)).addToStart(t.lastChild),h=l.fillBefore(f,!0);if(h&&h.size&&a>0&&1==u&&(h=null),h){var m=O(t.lastChild.content,t.lastChild,n,o,i+1,1==u?a-1:-1,s-1);if(m){var g=t.lastChild.copy(m);return h.size?t.cutByIndex(0,u-1).append(h).addToEnd(g):t.replaceChild(u-1,g)}}}s>0&&(l=l.matchType((1==u&&a>0?n.node(i+1):t.lastChild).type));var v=o.index(i);if(v==p.childCount&&!p.type.compatibleContent(e.type))return null;for(var y=l.fillBefore(p.content,!0,v),k=v;y&&k<p.content.childCount;k++)c.type.allowsMarks(p.content.child(k).marks)||(y=null);if(!y)return null;if(s>0){var b=function t(e,n,o,i,a){var s,l=e.content,u=l.childCount;s=a>=0?o.node(i).contentMatchAt(o.indexAfter(i)).matchFragment(l,a>0?1:0,u):e.contentMatchAt(u);if(n>0){var d=t(l.lastChild,n-1,o,i+1,1==u?a-1:-1);l=l.replaceChild(u-1,d)}return e.copy(l.append(s.fillBefore(r.Fragment.empty,!0)))}(t.lastChild,s-1,n,i+1,1==u?a-1:-1);t=t.replaceChild(u-1,b)}return t=t.append(y),o.depth>i&&(t=t.addToEnd(function t(e,n){var r=e.node(n);var o=r.contentMatchAt(0).fillBefore(r.content,!0,e.index(n));e.depth>n&&(o=o.addToEnd(t(e,n+1)));return r.copy(o)}(o,i+1))),t}function I(t,e,n){var o=O(n.content,t.node(0),t,e,0,n.openStart,n.openEnd);return o?function(t,e,n){for(;e>0&&n>0&&1==t.childCount;)t=t.firstChild.content,e--,n--;return new r.Slice(t,e,n)}(o,n.openStart,e.depth):null}function D(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}m.jsonID("removeMark",S),c.prototype.addMark=function(t,e,n){var r=this,o=[],i=[],a=null,s=null;return this.doc.nodesBetween(t,e,function(r,l,u){if(r.isInline){var d=r.marks;if(!n.isInSet(d)&&u.type.allowsMarkType(n.type)){for(var c=Math.max(l,t),p=Math.min(l+r.nodeSize,e),f=n.addToSet(d),h=0;h<d.length;h++)d[h].isInSet(f)||(a&&a.to==c&&a.mark.eq(d[h])?a.to=p:o.push(a=new S(c,p,d[h])));s&&s.to==c?s.to=p:i.push(s=new C(c,p,n))}}}),o.forEach(function(t){return r.step(t)}),i.forEach(function(t){return r.step(t)}),this},c.prototype.removeMark=function(t,e,n){var o=this;void 0===n&&(n=null);var i=[],a=0;return this.doc.nodesBetween(t,e,function(o,s){if(o.isInline){a++;var l=null;if(n instanceof r.MarkType){var u=n.isInSet(o.marks);u&&(l=[u])}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length)for(var d=Math.min(s+o.nodeSize,e),c=0;c<l.length;c++){for(var p=l[c],f=void 0,h=0;h<i.length;h++){var m=i[h];m.step==a-1&&p.eq(i[h].style)&&(f=m)}f?(f.to=d,f.step=a):i.push({style:p,from:Math.max(s,t),to:d,step:a})}}}),i.forEach(function(t){return o.step(new S(t.from,t.to,t.style))}),this},c.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var o=this.doc.nodeAt(t),i=[],a=t+1,s=0;s<o.childCount;s++){var l=o.child(s),u=a+l.nodeSize,d=n.matchType(l.type,l.attrs);if(d){n=d;for(var c=0;c<l.marks.length;c++)e.allowsMarkType(l.marks[c].type)||this.step(new S(a,u,l.marks[c]))}else i.push(new v(a,u,r.Slice.empty));a=u}if(!n.validEnd){var p=n.fillBefore(r.Fragment.empty,!0);this.replace(a,a,new r.Slice(p,0,0))}for(var f=i.length-1;f>=0;f--)this.step(i[f]);return this},c.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=r.Slice.empty);var o=E(this.doc,t,e,n);return o&&this.step(o),this},c.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new r.Slice(r.Fragment.from(n),0,0))},c.prototype.delete=function(t,e){return this.replace(t,e,r.Slice.empty)},c.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var T=function(t){this.open=[];for(var e=0;e<=t.depth;e++){var n=t.node(e),o=n.contentMatchAt(t.indexAfter(e));this.open.push({parent:n,match:o,content:r.Fragment.empty,wrapper:!1,openEnd:0,depth:e})}this.placed=[]};function R(t,e,n){var r=t.content;if(e>1){var o=R(t.firstChild,e-1,1==t.childCount?n-1:0);r=t.content.replaceChild(0,o)}var i=t.type.contentMatch.fillBefore(r,0==n);return t.copy(i.append(r))}function A(t,e,n,r,o){if(e<n){var i=t.firstChild;t=t.replaceChild(0,i.copy(A(i.content,e+1,n,r,i)))}return e>r&&(t=o.contentMatchAt(0).fillBefore(t,!0).append(t)),t}function B(t,e){for(var n=[],r=Math.min(t.depth,e.depth);r>=0;r--){var o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;o==e.start(r)&&n.push(r)}return n}T.prototype.placeSlice=function(t,e,n,o,i){if(e>0){var a=t.firstChild,s=this.placeSlice(a.content,Math.max(0,e-1),n&&1==t.childCount?n-1:0,o,a);s.content!=a.content&&(s.content.size?(t=t.replaceChild(0,a.copy(s.content)),e=s.openStart+1):(1==t.childCount&&(n=0),t=t.cutByIndex(1),e=0))}var l=this.placeContent(t,e,n,o,i);if(o>2&&l.size&&0==e){for(var u=0;u<l.content.childCount;u++){var d=l.content.child(u);this.placeContent(d.content,0,n&&u==l.content.childCount.length-1?n-1:0,o,d)}l=r.Fragment.empty}return l},T.prototype.placeContent=function(t,e,n,o,i){for(var a=0;a<t.childCount;a++){for(var s=t.child(a),l=!1,u=a==t.childCount-1,d=this.open.length-1;d>=0;d--){var c=this.open[d],p=void 0;if(o>1&&(p=c.match.findWrapping(s.type))&&(!i||!p.length||p[p.length-1]!=i.type)){for(;this.open.length-1>d;)this.closeNode();for(var f=0;f<p.length;f++)c.match=c.match.matchType(p[f]),d++,c={parent:p[f].create(),match:p[f].contentMatch,content:r.Fragment.empty,wrapper:!0,openEnd:0,depth:d+f},this.open.push(c)}var h=c.match.matchType(s.type);if(!h){var m=c.match.fillBefore(r.Fragment.from(s));if(!m){if(i&&c.match.matchType(i.type))break;continue}for(var g=0;g<m.childCount;g++){var v=m.child(g);this.addNode(c,v,0),h=c.match.matchFragment(v)}}for(;this.open.length-1>d;)this.closeNode();s=s.mark(c.parent.type.allowedMarks(s.marks)),e&&(s=R(s,e,u?n:0),e=0),this.addNode(c,s,u?n:0),c.match=h,u&&(n=0),l=!0;break}if(!l)break}return this.open.length>1&&(a>0&&a==t.childCount||i&&this.open[this.open.length-1].parent.type==i.type)&&this.closeNode(),new r.Slice(t.cutByIndex(a),e,n)},T.prototype.addNode=function(t,e,n){var o,i;t.content=(o=t.content,i=t.openEnd,i?o.replaceChild(o.childCount-1,function t(e,n){var o=e.content;if(n>1){var i=t(e.lastChild,n-1);o=e.content.replaceChild(e.childCount-1,i)}var a=e.contentMatchAt(e.childCount).fillBefore(r.Fragment.empty,!0);return e.copy(o.append(a))}(o.lastChild,i)):o).addToEnd(e),t.openEnd=n},T.prototype.closeNode=function(){var t=this.open.pop();0==t.content.size||(t.wrapper?this.addNode(this.open[this.open.length-1],t.parent.copy(t.content),t.openEnd+1):this.placed[t.depth]={depth:t.depth,content:t.content,openEnd:t.openEnd})},c.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var o=this.doc.resolve(t),i=this.doc.resolve(e);if(D(o,i,n))return this.step(new v(t,e,n));var a=B(o,this.doc.resolve(e));0==a[a.length-1]&&a.pop();var s=-(o.depth+1);a.unshift(s);for(var l=o.depth,u=o.pos-1;l>0;l--,u--){var d=o.node(l).type.spec;if(d.defining||d.isolating)break;a.indexOf(l)>-1?s=l:o.before(l)==u&&a.splice(1,0,-l)}for(var c=a.indexOf(s),p=[],f=n.openStart,h=n.content,m=0;;m++){var g=h.firstChild;if(p.push(g),m==n.openStart)break;h=g.content}f>0&&p[f-1].type.spec.defining&&o.node(c).type!=p[f-1].type?f-=1:f>=2&&p[f-1].isTextblock&&p[f-2].type.spec.defining&&o.node(c).type!=p[f-2].type&&(f-=2);for(var y=n.openStart;y>=0;y--){var k=(y+f+1)%(n.openStart+1),b=p[k];if(b)for(var _=0;_<a.length;_++){var w=a[(_+c)%a.length],x=!0;w<0&&(x=!1,w=-w);var M=o.node(w-1),C=o.index(w-1);if(M.canReplaceWith(C,C,b.type,b.marks))return this.replace(o.before(w),x?i.after(w):e,new r.Slice(A(n.content,0,n.openStart,k),k,n.openEnd))}}return this.replace(t,e,n)},c.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var o=x(this.doc,t,n.type);null!=o&&(t=e=o)}return this.replaceRange(t,e,new r.Slice(r.Fragment.from(n),0,0))},c.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=B(n,r),i=0;i<o.length;i++){var a=o[i],s=i==o.length-1;if(s&&0==a||n.node(a).type.contentMatch.validEnd)return this.delete(n.start(a),r.end(a));if(a>0&&(s||n.node(a-1).canReplace(n.index(a-1),r.indexAfter(a-1))))return this.delete(n.before(a),r.after(a))}for(var l=1;l<=n.depth;l++)if(t-n.start(l)==n.depth-l&&e>n.end(l))return this.delete(n.before(l),e);return this.delete(t,e)},e.Transform=c,e.TransformError=d,e.Step=m,e.StepResult=g,e.joinPoint=function(t,e,n){void 0===n&&(n=-1);for(var r=t.resolve(e),o=r.depth;;o--){var i=void 0,a=void 0;if(o==r.depth?(i=r.nodeBefore,a=r.nodeAfter):n>0?(i=r.node(o+1),a=r.node(o).maybeChild(r.index(o)+1)):(i=r.node(o).maybeChild(r.index(o)-1),a=r.node(o+1)),i&&!i.isTextblock&&w(i,a))return e;if(0==o)break;e=n<0?r.before(o):r.after(o)}},e.canJoin=function(t,e){var n=t.resolve(e),r=n.index();return w(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)},e.canSplit=function(t,e,n,r){void 0===n&&(n=1);var o=t.resolve(e),i=o.depth-n,a=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var s=o.depth-1,l=n-2;s>i;s--,l--){var u=o.node(s),d=o.index(s);if(u.type.spec.isolating)return!1;var c=u.content.cutByIndex(d,u.childCount),p=r&&r[l]||u;if(p!=u&&(c=c.replaceChild(0,p.type.create(p.attrs))),!u.canReplace(d+1,u.childCount)||!p.type.validContent(c))return!1}var f=o.indexAfter(i),h=r&&r[0];return o.node(i).canReplaceWith(f,f,h?h.type:o.node(i+1).type)},e.insertPoint=x,e.dropPoint=function(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var a=1;a<=(0==n.openStart&&n.size?2:1);a++)for(var s=r.depth;s>=0;s--){var l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,u=r.index(s)+(l>0?1:0);if(1==a?r.node(s).canReplace(u,u,o):r.node(s).contentMatchAt(u).findWrapping(o.firstChild.type))return 0==l?r.pos:l<0?r.before(s+1):r.after(s+1)}return null},e.liftTarget=function(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),n=t.depth;;--n){var r=t.$from.node(n),o=t.$from.index(n),i=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(o,i,e))return n;if(0==n||r.type.spec.isolating||!b(r,o,i))break}},e.findWrapping=function(t,e,n,r){void 0===r&&(r=t);var o=function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;var a=i.length?i[0]:e;return n.canReplaceWith(r,o,a)?i:null}(t,e),i=o&&function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.child(r),a=e.contentMatch.findWrapping(i.type);if(!a)return null;for(var s=(a.length?a[a.length-1]:e).contentMatch,l=r;s&&l<o;l++)s=s.matchType(n.child(l).type);return s&&s.validEnd?a:null}(r,e);return i?o.map(_).concat({type:e,attrs:n}).concat(i.map(_)):null},e.StepMap=l,e.MapResult=s,e.Mapping=u,e.AddMarkStep=C,e.RemoveMarkStep=S,e.ReplaceStep=v,e.ReplaceAroundStep=y,e.replaceStep=E},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(4),a=n(7),s=n(9),l=function(t){function e(e){var n=t.call(this,e)||this;return n.dialog=e,n.data={href:"",title:"",target:void 0},n}return r.__extends(e,t),e.prototype.onCancelAction=function(){this.dialog.close()},e.prototype.onConfirmAction=function(){this.editor.exec("createLink",this.getData()),this.dialog.close(),this.editor.focus()},e.prototype.setData=function(t){var e=s.getMark(t,a.schema.marks.link);e&&(this.data={href:e.attrs.href,title:e.attrs.title,target:e.attrs.target})},e.prototype.getData=function(){return{href:this.href.nativeElement.value||void 0,title:this.title.nativeElement.value||void 0,target:this.target.nativeElement.checked?"_blank":void 0}},r.__decorate([o.Input(),r.__metadata("design:type",Object)],e.prototype,"editor",void 0),r.__decorate([o.ViewChild("href"),r.__metadata("design:type",o.ElementRef)],e.prototype,"href",void 0),r.__decorate([o.ViewChild("title"),r.__metadata("design:type",o.ElementRef)],e.prototype,"title",void 0),r.__decorate([o.ViewChild("target"),r.__metadata("design:type",o.ElementRef)],e.prototype,"target",void 0),e=r.__decorate([o.Component({template:'\n        <kendo-dialog-titlebar>\n            Insert Link\n        </kendo-dialog-titlebar>\n        <div class="k-editor-dialog">\n            <div class="k-editor-dialog k-popup-edit-form k-window-content k-content" >\n                <div class="k-edit-form-container k-window-content">\n                    <div class="k-edit-label">\n                        <label for="k-editor-link-url">Web address</label>\n                    </div>\n                    <div class="k-edit-field">\n                        <input #href [value]="data.href" type="text" class="k-input k-textbox">\n                    </div>\n                    <div class="k-edit-label k-editor-link-text-row">\n                        <label for="k-editor-link-text">Title</label>\n                    </div>\n                    <div class="k-edit-field k-editor-link-text-row">\n                        <input #title [value]="data.title" type="text" class="k-input k-textbox">\n                    </div>\n                    <div class="k-edit-field">\n                        <input #target type="checkbox" class="k-checkbox">\n                        <label for="k-editor-link-target" class="k-checkbox-label">Open link in new window</label>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <kendo-dialog-actions>\n            <button kendoButton (click)="onCancelAction()">Cancel</button>\n            <button kendoButton (click)="onConfirmAction()" [primary]="true">Insert</button>\n        </kendo-dialog-actions>\n    '}),r.__metadata("design:paramtypes",[i.DialogRef])],e)}(i.DialogContentBase);e.LinkDialogComponent=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(4),a=function(t){function e(e){var n=t.call(this,e)||this;return n.dialog=e,n.data="",n}return r.__extends(e,t),e.prototype.onCancelAction=function(){this.dialog.close()},e.prototype.onConfirmAction=function(){this.editor.exec("setHTML",this.getData()),this.dialog.close(),this.editor.focus()},e.prototype.getData=function(){return this.textarea.nativeElement.value},e.prototype.setData=function(){this.data=this.indent(this.editor.getSource())},e.prototype.indent=function(t){return t.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")},r.__decorate([o.Input(),r.__metadata("design:type",Object)],e.prototype,"editor",void 0),r.__decorate([o.ViewChild("textarea"),r.__metadata("design:type",o.ElementRef)],e.prototype,"textarea",void 0),e=r.__decorate([o.Component({template:'\n        <kendo-dialog-titlebar>\n            View Source\n        </kendo-dialog-titlebar>\n        <textarea [value]="data" #textarea class="k-editor-textarea k-input"></textarea>\n        <kendo-dialog-actions>\n            <button kendoButton (click)="onCancelAction()">Cancel</button>\n            <button kendoButton (click)="onConfirmAction()" [primary]="true">Update</button>\n        </kendo-dialog-actions>\n    ',styles:["\n        >>> .k-editor-textarea {\n            height: 100%;\n        }\n    "]}),r.__metadata("design:paramtypes",[i.DialogRef])],e)}(i.DialogContentBase);e.SourceDialogComponent=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(10),a=n(4),s=n(9),l=n(5),u=function(t){function e(e){var n=t.call(this,e)||this;return n.dialog=e,n.data={src:"",alt:"",width:"",height:""},n.src=new i.FormControl("",i.Validators.required),n.alt=new i.FormControl(""),n.width=new i.FormControl("",i.Validators.min(1)),n.height=new i.FormControl("",i.Validators.min(1)),n.imageData=new i.FormGroup({src:n.src,alt:n.alt,width:n.width,height:n.height}),n}return r.__extends(e,t),e.prototype.onCancelAction=function(){this.dialog.close()},e.prototype.onConfirmAction=function(){this.src.value&&(this.editor.exec("insertImage",this.getData()),this.dialog.close(),this.editor.focus())},e.prototype.setData=function(t){var e=s.getNodeFromSelection(t);e&&(this.src.patchValue(e.attrs.src),this.alt.patchValue(e.attrs.alt),this.width.patchValue(e.attrs.width),this.height.patchValue(e.attrs.height))},e.prototype.getData=function(){return{src:this.src.value,alt:this.alt.value,width:this.normalizeDimension(this.width.value),height:this.normalizeDimension(this.height.value)}},e.prototype.normalizeDimension=function(t){return Number.isNaN(parseInt(t,10))||parseInt(t,10)<=0?"":l.safeString(parseInt(t,10))},r.__decorate([o.Input(),r.__metadata("design:type",Object)],e.prototype,"editor",void 0),e=r.__decorate([o.Component({template:'\n        <kendo-dialog-titlebar>\n            Insert Image\n        </kendo-dialog-titlebar>\n        <div class="k-editor-dialog">\n            <div class="k-editor-dialog k-popup-edit-form k-window-content k-content" >\n                <div class="k-edit-form-container k-window-content">\n                    <div class="k-edit-label">\n                        <label for="k-editor-image-url">Web address</label>\n                    </div>\n                    <div class="k-edit-field">\n                        <input [formControl]="src" type="text" class="k-input k-textbox">\n                    </div>\n                    <div class="k-edit-label">\n                        <label for="k-editor-image-text">Alternate text</label>\n                    </div>\n                    <div class="k-edit-field">\n                        <input [formControl]="alt" type="text" class="k-input k-textbox">\n                    </div>\n                    <div class="k-edit-label">\n                        <label for="k-editor-image-width">Width (px)</label>\n                    </div>\n                    <div class="k-edit-field">\n                        <input [formControl]="width" type="text" class="k-input k-textbox">\n                    </div>\n                    <div class="k-edit-label">\n                        <label for="k-editor-image-height">Height (px)</label>\n                    </div>\n                    <div class="k-edit-field">\n                        <input [formControl]="height" type="text" class="k-input k-textbox">\n                    </div>\n                </div>\n            </div>\n        </div>\n        <kendo-dialog-actions>\n            <button kendoButton (click)="onCancelAction()">Cancel</button>\n            <button kendoButton [disabled]="imageData.invalid" (click)="onConfirmAction()" [primary]="true">Insert</button>\n        </kendo-dialog-actions>\n    '}),r.__metadata("design:paramtypes",[a.DialogRef])],e)}(a.DialogContentBase);e.ImageDialogComponent=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(2),a=n(5),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.valueChange=new o.EventEmitter,e}return r.__extends(e,t),n=e,Object.defineProperty(e.prototype,"outerWidth",{get:function(){if(this.element)return a.outerWidth(this.element.nativeElement)},enumerable:!0,configurable:!0}),r.__decorate([o.Input(),r.__metadata("design:type",String)],e.prototype,"textField",void 0),r.__decorate([o.Input(),r.__metadata("design:type",String)],e.prototype,"valueField",void 0),r.__decorate([o.Input(),r.__metadata("design:type",Boolean)],e.prototype,"valuePrimitive",void 0),r.__decorate([o.Input(),r.__metadata("design:type",String)],e.prototype,"value",void 0),r.__decorate([o.Input(),r.__metadata("design:type",Array)],e.prototype,"data",void 0),r.__decorate([o.Input(),r.__metadata("design:type",Object)],e.prototype,"defaultItem",void 0),r.__decorate([o.Input(),r.__metadata("design:type",Function)],e.prototype,"itemDisabled",void 0),r.__decorate([o.Output(),r.__metadata("design:type",o.EventEmitter)],e.prototype,"valueChange",void 0),r.__decorate([o.ViewChild("toolbarTemplate"),r.__metadata("design:type",o.TemplateRef)],e.prototype,"toolbarTemplate",void 0),r.__decorate([o.ViewChild("element"),r.__metadata("design:type",o.ElementRef)],e.prototype,"element",void 0),e=n=r.__decorate([o.Component({providers:[{provide:i.ToolBarToolComponent,useExisting:o.forwardRef(function(){return n})}],selector:"kendo-toolbar-dropdownlist",template:'\n        <ng-template #toolbarTemplate>\n            <kendo-dropdownlist #element\n                [defaultItem]="defaultItem"\n                [textField]="textField"\n                [valueField]="valueField"\n                [data]="data"\n                [value]="value"\n                [valuePrimitive]="valuePrimitive"\n                [itemDisabled]="itemDisabled"\n                (valueChange)="valueChange.emit($event)"\n            >\n            </kendo-dropdownlist>\n        </ng-template>\n    '})],e);var n}(i.ToolBarToolComponent);e.ToolBarDropDownListComponent=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.commandIcons={bold:"bold",italic:"italic",underline:"underline",strikethrough:"strikethrough",createLink:"link-horizontal",unlink:"unlink-horizontal",insertOrderedList:"list-ordered",insertUnorderedList:"list-unordered",indent:"indent-increase",outdent:"indent-decrease",alignLeft:"align-left",alignCenter:"align-center",alignRight:"align-right",alignJustify:"align-justify",viewSource:"html",undo:"undo",redo:"redo",insertImage:"image",subscript:"sub-script",superscript:"sup-script"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3);e.EditorComponent=r.EditorComponent;var o=n(31);e.EditorModule=o.EditorModule},function(t,e){t.exports=d},function(t,e){t.exports=c},function(t,e){t.exports=p},function(t,e){t.exports=f},function(t,e){t.exports=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),o=n(13),i=n(12),a=n(28),s="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);e.buildKeymap=function(t,e){var n={};function l(t,r){if(e){var o=e[t];if(!1===o)return;o&&(t=o)}n[t]=r}if(l("Mod-z",i.undo),l("Shift-Mod-z",i.redo),l("Backspace",a.undoInputRule),s||l("Mod-y",i.redo),t.marks.strong&&l("Mod-b",r.toggleMark(t.marks.strong)),t.marks.em&&l("Mod-i",r.toggleMark(t.marks.em)),t.marks.underline&&l("Mod-u",r.toggleMark(t.marks.underline)),t.nodes.hardBreak){var u=t.nodes.hardBreak,d=r.chainCommands(r.exitCode,function(t,e){return e(t.tr.replaceSelectionWith(u.create()).scrollIntoView()),!0});l("Mod-Enter",d),l("Shift-Enter",d),s&&l("Ctrl-Enter",d)}return t.nodes.listItem&&l("Enter",o.splitListItem(t.nodes.listItem)),n}},function(t,e){t.exports=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),o=n(7),i=n(14),a=n(9),s=n(30),l={bold:function(){return a.toggleBold},italic:function(){return a.toggleItalic},createLink:function(t){return a.createLink(t)},unlink:function(){return a.removeMark(o.schema.marks.link)},underline:function(){return a.toggleUnderline},strikethrough:function(){return a.toggleStrikethrough},subscript:function(){return a.toggleSubscript},superscript:function(){return a.toggleSuperscript}},u={format:function(t){return a.format(t)},alignLeft:function(){return a.alignBlocks(i.alignLeftRules)},alignCenter:function(){return a.alignBlocks(i.alignCenterRules)},alignRight:function(){return a.alignBlocks(i.alignRightRules)},alignJustify:function(){return a.alignBlocks(i.alignRemoveRules)},indent:function(){return a.indent},outdent:function(){return a.outdent},insertOrderedList:function(){return s.toggleOrderedList},insertUnorderedList:function(){return s.toggleUnorderedList},getHTML:function(){return a.getHTML},setHTML:function(t){return a.setHTML(t)},undo:function(){return r.undo},redo:function(){return r.redo},insertImage:function(t){return a.insertImage(t)}};e.editorCommands=Object.assign({},l,u)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),o=n(11),i=n(15),a=n(6),s=n(13);function l(t,n){var r=t.selection,o=r.from,i=r.to,a=t.schema.nodes.paragraph,s=[];n.doc.nodesBetween(o,i,function(t,e){t.type===a&&s.push({node:t,pos:e})});for(var l=s.length-1;l>=0;l--){var u=s[l],d=n.doc.resolve(n.mapping.map(u.pos));if(d.depth>0){var c=void 0;c=u.node.textContent&&u.node.textContent.length>0?n.doc.resolve(n.mapping.map(u.pos+u.node.textContent.length)):n.doc.resolve(n.mapping.map(u.pos+1));var p=d.blockRange(c);p&&n.lift(p,e.getListLiftTarget(t.schema,d))}}return n}function u(t){return function(e,n,r){if(!r)return!1;var o=(e=r.state).selection,i=o.$from,a=o.$to,s=i.node(-2),l=i.node(-3),u=p(e.doc,i,a,e.schema.nodes[t]);return(s&&s.type===e.schema.nodes[t]||l&&l.type===e.schema.nodes[t])&&u?m()(e,n):(u||(m()(e,n),e=r.state),g(e.schema.nodes[t])(e,n))}}function d(t,e,n){var o=e.$from,a=e.$to,s=t.schema.nodes.listItem,l=o.blockRange(a,function(t){return t.childCount&&t.firstChild.type===s});if(!l||l.depth<2||o.node(l.depth-1).type!==s)return n;var u=l.end,d=a.end(l.depth);return u<d&&(n.step(new i.ReplaceAroundStep(u-1,d,u,d,new r.Slice(r.Fragment.from(s.create(void 0,l.parent.copy())),1,0),1,!0)),l=new r.NodeRange(n.doc.resolve(o.pos),n.doc.resolve(d),l.depth)),n.lift(l,i.liftTarget(l)).scrollIntoView()}function c(t,e,n,r,i){var a=t.schema.nodes.listItem,s=!1;return i.doc.nodesBetween(e,n,function(n,l){if(!s&&n.type===a&&l>e){s=!0;for(var u=r+3;u>r+2;){var c=i.doc.resolve(i.mapping.map(l));u=c.depth;var p=i.doc.resolve(i.mapping.map(l+n.textContent.length)),f=new o.TextSelection(c,p);i=d(t,f,i)}}}),i}function p(t,e,n,r){return 0===f(t,e,n).filter(function(t){return t.type!==r}).length}function f(t,e,n){for(var r=Array(),o=h(t,e).depth,i=t.resolve(e.start(o));i.pos<=n.start(n.depth);){var a=Math.min(i.depth,o),s=i.node(a);if(s&&r.push(s),0===a)break;var l=t.resolve(i.after(a));if(l.start(a)>=t.nodeSize-2)break;l.depth!==i.depth&&(l=t.resolve(l.pos+2)),i=l.depth?t.resolve(l.start(l.depth)):t.resolve(l.end(l.depth))}return r}function h(t,e){var n=["blockquote","bulletList","orderedList"];if(1===e.depth)return e;for(var r=e.node(e.depth),o=e;e.depth>=1;)(r=(e=t.resolve(e.before(e.depth))).node(e.depth))&&-1!==n.indexOf(r.type.name)&&(o=e);return o}function m(){return function(t,e){var n=t.tr,r=t.selection,a=r.$from,s=r.$to;return n.doc.nodesBetween(a.pos,s.pos,function(e,r){if(e.isTextblock||"blockquote"===e.type.name||"panel"===e.type.name){var a=new o.NodeSelection(n.doc.resolve(n.mapping.map(r))),s=a.$from.blockRange(a.$to);if(!s||a.$from.parent.type!==t.schema.nodes.listItem)return!1;var l=s&&i.liftTarget(s);if(null==l)return!1;n.lift(s,l)}}),e&&e(n),!0}}function g(t){return a.autoJoin(s.wrapInList(t),function(e,n){return e.type===n.type&&e.type===t})}e.rootListDepth=function(t,e){for(var n,r=e.bulletList,o=e.orderedList,i=e.listItem,a=t.depth-1;a>0;a--){var s=t.node(a);if(s.type!==r&&s.type!==o||(n=a),s.type!==r&&s.type!==o&&s.type!==i)break}return n},e.getListLiftTarget=function(t,e){for(var n=e.depth,r=t.nodes,o=r.bulletList,i=r.orderedList,a=r.listItem,s=e.depth;s>0;s--){var l=e.node(s);if(l.type!==o&&l.type!==i||(n=s),l.type!==o&&l.type!==i&&l.type!==a)break}return n-1},e.liftSelectionList=l,e.toggleList=function(t,n,r,o){var i=t.selection,a=i.$from.node(i.$from.depth-2),s=i.$to.node(i.$to.depth-2);if(a&&a.type.name===o&&s&&s.type.name===o){var d=e.rootListDepth(i.$to,t.schema.nodes),p=c(t,i.$to.pos,i.$to.end(d),d,t.tr);return n(p=l(t,p)),!0}return u(o)(t,n,r)},e.toggleListCommand=u,e.liftFollowingList=c,e.isRangeOfType=p,e.getAncestorNodesBetween=f,e.findAncestorPosition=h,e.liftListItems=m,e.wrapInList=g,e.toggleUnorderedList=function(t,n,r){return e.toggleList(t,n,r,"bulletList")},e.toggleOrderedList=function(t,n,r){return e.toggleList(t,n,r,"orderedList")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(32),a=n(10),s=n(2),l=n(33),u=n(4),d=n(34),c=n(3),p=n(19),f=n(35),h=n(36),m=n(37),g=n(38),v=n(16),y=n(17),k=n(18),b=[f.EditorButtonDirective,h.EditorDropDownDirective,g.EditorDialogDirective],_=[p.ToolBarDropDownListComponent,m.ToolBarComboBoxComponent],w=[v.LinkDialogComponent,y.SourceDialogComponent,k.ImageDialogComponent],x=function(){function t(){}return t=r.__decorate([o.NgModule({declarations:[c.EditorComponent,b,_,w],exports:[c.EditorComponent,b,_,s.ToolBarModule,d.ButtonModule,a.FormsModule,a.ReactiveFormsModule],imports:[i.CommonModule,s.ToolBarModule,l.DropDownsModule,u.DialogModule,d.ButtonModule,a.FormsModule,a.ReactiveFormsModule],entryComponents:[w]})],t)}();e.EditorModule=x},function(t,e){t.exports=g},function(t,e){t.exports=v},function(t,e){t.exports=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(2),a=n(20),s=n(3),l=function(){function t(t,e){this.button=t,this.editor=e}return t.prototype.ngOnInit=function(){var t=this;this.button.icon||(this.button.icon=a.commandIcons[this.command]),this.subs=this.button.click.subscribe(function(){t.editor.exec(t.command),t.editor.focus()}),this.subs.add(this.editor.stateChange.subscribe(function(e){"indent"===t.command||"outdent"===t.command?t.button.disabled=!e[t.command]:"unlink"===t.command?t.button.disabled=!e.link:"undo"===t.command||"redo"===t.command?t.button.disabled=e[t.command]:t.button.selected=e[t.command]}))},t.prototype.ngOnDestroy=function(){this.subs.unsubscribe()},r.__decorate([o.Input("kendoEditorButton"),r.__metadata("design:type",String)],t.prototype,"command",void 0),t=r.__decorate([o.Directive({selector:"kendo-toolbar-button[kendoEditorButton]"}),r.__param(1,o.Host()),r.__metadata("design:paramtypes",[i.ToolBarButtonComponent,s.EditorComponent])],t)}();e.EditorButtonDirective=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(19),a=n(3),s=function(){function t(t,e){this.dropdownlist=t,this.editor=e,this.command="format"}return t.prototype.ngOnInit=function(){var t=this;this.dropdownlist.textField="text",this.dropdownlist.valueField="tag",this.dropdownlist.valuePrimitive=!0,this.dropdownlist.itemDisabled=function(t){return""===t.dataItem.tag},this.dropdownlist.data=[{text:"Paragraph",tag:"p"},{text:"Quotation",tag:"blockquote"},{text:"Heading 1",tag:"h1"},{text:"Heading 2",tag:"h2"},{text:"Heading 3",tag:"h3"},{text:"Heading 4",tag:"h4"},{text:"Heading 5",tag:"h5"},{text:"Heading 6",tag:"h6"}],this.dropdownlist.defaultItem={text:"Format",tag:""},this.dropdownlist.valueChange.subscribe(function(e){t.editor.exec("format",{tag:e}),t.editor.focus()}),this.editor.stateChange.subscribe(function(e){var n=e.format,r=t.dropdownlist.data.findIndex(function(t){return t.tag===n.tag});t.dropdownlist.value=-1!==r?n.tag:""})},r.__decorate([o.Input("kendoEditorDropDown"),r.__metadata("design:type",String)],t.prototype,"command",void 0),t=r.__decorate([o.Directive({selector:"kendo-toolbar-dropdownlist[kendoEditorDropDown]"}),r.__param(1,o.Host()),r.__metadata("design:paramtypes",[i.ToolBarDropDownListComponent,a.EditorComponent])],t)}();e.EditorDropDownDirective=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(2),a=n(5),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.valueChange=new o.EventEmitter,e}return r.__extends(e,t),n=e,Object.defineProperty(e.prototype,"outerWidth",{get:function(){if(this.element)return a.outerWidth(this.element.nativeElement)},enumerable:!0,configurable:!0}),r.__decorate([o.Input(),r.__metadata("design:type",String)],e.prototype,"textField",void 0),r.__decorate([o.Input(),r.__metadata("design:type",String)],e.prototype,"valueField",void 0),r.__decorate([o.Input(),r.__metadata("design:type",Array)],e.prototype,"data",void 0),r.__decorate([o.Input(),r.__metadata("design:type",String)],e.prototype,"value",void 0),r.__decorate([o.Input(),r.__metadata("design:type",String)],e.prototype,"placeholder",void 0),r.__decorate([o.Output(),r.__metadata("design:type",o.EventEmitter)],e.prototype,"valueChange",void 0),r.__decorate([o.ViewChild("toolbarTemplate"),r.__metadata("design:type",o.TemplateRef)],e.prototype,"toolbarTemplate",void 0),r.__decorate([o.ViewChild("element"),r.__metadata("design:type",o.ElementRef)],e.prototype,"element",void 0),e=n=r.__decorate([o.Component({providers:[{provide:i.ToolBarToolComponent,useExisting:o.forwardRef(function(){return n})}],selector:"kendo-toolbar-combobox",template:'\n        <ng-template #toolbarTemplate>\n            <kendo-combobox #element\n                [placeholder]="placeholder"\n                [textField]="textField"\n                [valueField]="valueField"\n                [data]="data"\n                [value]="value"\n                (valueChange)="valueChange.emit($event)"\n            >\n            </kendo-combobox>\n        </ng-template>\n    '})],e);var n}(i.ToolBarToolComponent);e.ToolBarComboBoxComponent=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(2),a=n(20),s=n(3),l=function(){function t(t,e){this.button=t,this.editor=e}return t.prototype.ngOnInit=function(){var t=this;this.button.icon||(this.button.icon=a.commandIcons[this.command]),this.subs=this.button.click.subscribe(function(){t.editor.openDialog(t.command)}),this.subs.add(this.editor.stateChange.subscribe(function(e){"createLink"===t.command&&(t.button.disabled=!e.link&&e.noSelection)}))},t.prototype.ngOnDestroy=function(){this.subs.unsubscribe()},r.__decorate([o.Input("kendoEditorDialog"),r.__metadata("design:type",String)],t.prototype,"command",void 0),t=r.__decorate([o.Directive({selector:"kendo-toolbar-button[kendoEditorDialog]"}),r.__param(1,o.Host()),r.__metadata("design:paramtypes",[i.ToolBarButtonComponent,s.EditorComponent])],t)}();e.EditorDialogDirective=l}])});